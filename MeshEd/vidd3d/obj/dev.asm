	TITLE	D:\Games\duke_nukem_forever\Hacked\MeshEd\vidd3d\dev.cpp
	.386P
include listing.inc
if @Version gt 510
.model FLAT
else
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
_BSS	SEGMENT DWORD USE32 PUBLIC 'BSS'
_BSS	ENDS
$$SYMBOLS	SEGMENT BYTE USE32 'DEBSYM'
$$SYMBOLS	ENDS
$$TYPES	SEGMENT BYTE USE32 'DEBTYP'
$$TYPES	ENDS
_TLS	SEGMENT DWORD USE32 PUBLIC 'TLS'
_TLS	ENDS
;	COMDAT ??_C@_0DD@BIGB@D?3?2Games?2duke_nukem_forever?2Hack@
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ??_C@_0BF@MBIJ@Cannot?5init?5CPrintfT?$AA@
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ??_C@_0BN@CDMH@Unable?5to?5lock?5vertex?5buffer?$AA@
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ??_C@_0DK@KCID@D?3?2Games?2duke_nukem_forever?2Hack@
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ??_C@_0BP@NEML@Unable?5to?5unlock?5vertex?5buffer?$AA@
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ??_C@_0BF@HNDD@Already?5in?5primitive?$AA@
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ??_C@_0BB@DDMK@Not?5in?5primitive?$AA@
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ??_C@_0BD@GDIC@bad?5primitive?5type?$AA@
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ??_C@_0CJ@MEJC@VManager?3?3end_prim?3?5DrawPrimitiv@
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ??_C@_0DC@MINH@D?3?2Games?2duke_nukem_forever?2Hack@
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ??8@YAHABU_GUID@@0@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??2@YAPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??3@YAXPAX@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0XListState@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0XListState@@QAE@KK@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0XChainState@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0XChainState@@QAE@K@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0MemStats@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?is_locked@XMutex@@QAEKXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?_d_assert@@YAXPBDK@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0FindState@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?get_hwnd@XWnd@@QAEPAUHWND__@@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1VidTex@@UAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GVidTex@@UAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1VidView@@UAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GVidView@@UAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0VidState@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1VidIf@@UAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?GetColor@VidIf@@UAEKXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?FlatColor@VidIf@@UAEXK@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?BeginScene@VidIf@@UAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?EndScene@VidIf@@UAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?Diags@VidIf@@UAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?BeginLines@VidIf@@UAEXK@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?EndLines@VidIf@@UAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GVidIf@@UAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _sqrtf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DXVECTOR3@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DXMATRIX@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DXQUATERNION@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DXVECTOR2@@QAE@MM@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DXVECTOR3@@QAE@MMM@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DXVECTOR4@@QAE@MMMM@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DXMATRIX@@QAE@MMMMMMMMMMMMMMMM@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DXQUATERNION@@QAE@MMMM@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DXPLANE@@QAE@MMMM@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DXCOLOR@@QAE@MMMM@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?realloc@PrimBuffer@@AAEXKK@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?reset@PrimBuffer@@QAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?Lock@VBuffer@@QAEPAXK@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?Unlock@VBuffer@@QAEXPAX@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?CheckRoom@VManager@@IAEXG@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1VManager@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?begin_prim@VManager@@QAEPAUDxVertexT@@KK@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?end_prim@VManager@@QAEXPAUDxVertexT@@K@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GPrimBuffer@@QAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1PrimBuffer@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0TexList@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?set@XFontLetter@@QAEXMM@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?get@XFontLetter@@QAEXPAM0@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?set_drawable@XFontLetter@@QAEXK@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0D3DState@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GVidD3D@@UAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0VidIf@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1TexList@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GVManager@@QAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0?$XChain@VXStatistic@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?get_head@?$XList@VXStatistic@@@@QAEPAVXStatistic@@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??C?$autoptr@VXImage@@@@QAEPAVXImage@@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1?$XChain@VXStatistic@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?free_list@?$XChain@VXStatistic@@@@QAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0?$XList@VXStatistic@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1?$XList@VXStatistic@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?free_list@?$XList@VXStatistic@@@@QAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?add_head@?$XList@VXStatistic@@@@QAEPAU_XPos@@PAVXStatistic@@@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?remove_head@?$XList@VXStatistic@@@@QAEPAVXStatistic@@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0?$XRcBase@VCStrObj@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1?$XRcBase@VCStrObj@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0?$XRcPtr@VCPathObj@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1?$XRcPtr@VCPathObj@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0?$XList@VXFindLevel@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1?$XList@VXFindLevel@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1?$XRingChain@VVBuffer@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??0?$XList@VVidTexD3D@@@@QAE@KK@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1?$XList@VVidTexD3D@@@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GCSysObj@@QAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GXFindLevel@@QAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GVBuffer@@QAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?new_node@?$XList@VXStatistic@@@@IAEPAUXNode@1@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?free_nodes@?$XList@VXStatistic@@@@IAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?free_nodes@?$XList@VXFindLevel@@@@IAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?free_nodes@?$XList@VVidTexD3D@@@@IAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?DelRef@?$XRcBase@VCStrObj@@@@QAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?DelRef@?$XRcPtr@VCPathObj@@@@QAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GCStrObj@@QAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GCPathObj@@QAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_7VidD3D@@6B@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_7VidTex@@6B@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_7VidIf@@6B@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_7CMemMap@@6B@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_7XMutex@@6B@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_7VidView@@6B@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
FLAT	GROUP _DATA, CONST, _BSS
	ASSUME	CS: FLAT, DS: FLAT, SS: FLAT
endif
PUBLIC	??2@YAPAXI@Z					; operator new
EXTRN	__imp_@xmalloc@4:NEAR
;	COMDAT ??2@YAPAXI@Z
_TEXT	SEGMENT
_size$ = 8
??2@YAPAXI@Z PROC NEAR					; operator new, COMDAT

; 129  : __inline void *operator new(size_t size){return xmalloc(size);}

	push	ebp
	mov	ebp, esp
	mov	ecx, DWORD PTR _size$[ebp]
	call	DWORD PTR __imp_@xmalloc@4
	pop	ebp
	ret	0
??2@YAPAXI@Z ENDP					; operator new
_TEXT	ENDS
PUBLIC	??3@YAXPAX@Z					; operator delete
EXTRN	__imp_@xfree@4:NEAR
;	COMDAT ??3@YAXPAX@Z
_TEXT	SEGMENT
_ptr$ = 8
??3@YAXPAX@Z PROC NEAR					; operator delete, COMDAT

; 130  : __inline void operator delete(void *ptr){xfree(ptr);}

	push	ebp
	mov	ebp, esp
	mov	ecx, DWORD PTR _ptr$[ebp]
	call	DWORD PTR __imp_@xfree@4
	pop	ebp
	ret	0
??3@YAXPAX@Z ENDP					; operator delete
_TEXT	ENDS
PUBLIC	??0TexList@@QAE@XZ				; TexList::TexList
PUBLIC	??0D3DState@@QAE@XZ				; D3DState::D3DState
PUBLIC	??0VidD3D@@QAE@XZ				; VidD3D::VidD3D
PUBLIC	?init@VidD3D@@UAEKPAVXWnd@@KKK@Z		; VidD3D::init
PUBLIC	?close@VidD3D@@UAEKXZ				; VidD3D::close
PUBLIC	?set_default@VidD3D@@UAEXXZ			; VidD3D::set_default
PUBLIC	?Activate@VidD3D@@UAEXXZ			; VidD3D::Activate
PUBLIC	?Deactivate@VidD3D@@UAEXXZ			; VidD3D::Deactivate
PUBLIC	?Diags@VidD3D@@UAEXXZ				; VidD3D::Diags
PUBLIC	??_7VidD3D@@6B@					; VidD3D::`vftable'
PUBLIC	??_GVidD3D@@UAEPAXI@Z				; VidD3D::`scalar deleting destructor'
PUBLIC	??_EVidD3D@@UAEPAXI@Z				; VidD3D::`vector deleting destructor'
PUBLIC	?GetColor@VidIf@@UAEKXZ				; VidIf::GetColor
PUBLIC	?FlatColor@VidIf@@UAEXK@Z			; VidIf::FlatColor
PUBLIC	??0VidIf@@QAE@XZ				; VidIf::VidIf
EXTRN	__imp_??0ImgDevice@@QAE@XZ:NEAR
EXTRN	?Swap@VidD3D@@UAEKK@Z:NEAR			; VidD3D::Swap
EXTRN	?ClearScreen@VidD3D@@UAEXK@Z:NEAR		; VidD3D::ClearScreen
EXTRN	?ClipWindow@VidD3D@@UAEXKKKK@Z:NEAR		; VidD3D::ClipWindow
EXTRN	?SetClipBounds@VidD3D@@UAEXKKKK@Z:NEAR		; VidD3D::SetClipBounds
EXTRN	?DepthEnable@VidD3D@@UAEXE@Z:NEAR		; VidD3D::DepthEnable
EXTRN	?ColorWrite@VidD3D@@UAEXE@Z:NEAR		; VidD3D::ColorWrite
EXTRN	?DepthWrite@VidD3D@@UAEXE@Z:NEAR		; VidD3D::DepthWrite
EXTRN	?FlatColor@VidD3D@@UAEXEEE@Z:NEAR		; VidD3D::FlatColor
EXTRN	?FlatAlpha@VidD3D@@UAEXE@Z:NEAR			; VidD3D::FlatAlpha
EXTRN	?AlphaTestValue@VidD3D@@UAEEE@Z:NEAR		; VidD3D::AlphaTestValue
EXTRN	?ColorMode@VidD3D@@UAE?AW4vidcolormodetype_t@@W42@@Z:NEAR ; VidD3D::ColorMode
EXTRN	?AlphaMode@VidD3D@@UAE?AW4vidalphamodetype_t@@W42@@Z:NEAR ; VidD3D::AlphaMode
EXTRN	?BlendMode@VidD3D@@UAE?AW4vidblendmodetype_t@@W42@@Z:NEAR ; VidD3D::BlendMode
EXTRN	?WindingMode@VidD3D@@UAE?AW4vidwindingmodetype_t@@W42@@Z:NEAR ; VidD3D::WindingMode
EXTRN	?MinFilterMode@VidD3D@@UAE?AW4vidfiltermodetype_t@@W42@@Z:NEAR ; VidD3D::MinFilterMode
EXTRN	?MagFilterMode@VidD3D@@UAE?AW4vidfiltermodetype_t@@W42@@Z:NEAR ; VidD3D::MagFilterMode
EXTRN	?AlphaTestMode@VidD3D@@UAE?AW4vidatestmodetype_t@@W42@@Z:NEAR ; VidD3D::AlphaTestMode
EXTRN	?DepthFunc@VidD3D@@UAE?AW4zfunc_modetype_t@@W42@@Z:NEAR ; VidD3D::DepthFunc
EXTRN	?AlphaTestEnable@VidD3D@@UAEKK@Z:NEAR		; VidD3D::AlphaTestEnable
EXTRN	?ForceDraw@VidD3D@@UAEXE@Z:NEAR			; VidD3D::ForceDraw
EXTRN	?Antialias@VidD3D@@UAEXE@Z:NEAR			; VidD3D::Antialias
EXTRN	?draw_polygon@VidD3D@@UAEXKPAVCVert@@@Z:NEAR	; VidD3D::draw_polygon
EXTRN	?DrawLine@VidD3D@@UAEXPAUvector_str@@000@Z:NEAR	; VidD3D::DrawLine
EXTRN	?DrawLineBox@VidD3D@@UAEXPAUvector_str@@000@Z:NEAR ; VidD3D::DrawLineBox
EXTRN	?DrawTriangle@VidD3D@@UAEXPAUvector_str@@0PAM0@Z:NEAR ; VidD3D::DrawTriangle
EXTRN	?DrawClippedPolygon@VidD3D@@UAEXKPAUvector_str@@0PAM0@Z:NEAR ; VidD3D::DrawClippedPolygon
EXTRN	?DrawPolygon@VidD3D@@UAEXKPAUvector_str@@0PAM0@Z:NEAR ; VidD3D::DrawPolygon
EXTRN	?DrawPolygonFlags@VidD3D@@UAEXKKPAUvector_str@@0PAM0@Z:NEAR ; VidD3D::DrawPolygonFlags
EXTRN	?DrawString@VidD3D@@UAEXHHHHPADEHHH@Z:NEAR	; VidD3D::DrawString
EXTRN	?is_char_drawable@VidD3D@@UAEKD@Z:NEAR		; VidD3D::is_char_drawable
EXTRN	?SetFontTexture@VidD3D@@UAEXXZ:NEAR		; VidD3D::SetFontTexture
EXTRN	?get_fontdim@VidD3D@@UAEXPAM0@Z:NEAR		; VidD3D::get_fontdim
EXTRN	?get_fontletter@VidD3D@@UAEXDPAM0@Z:NEAR	; VidD3D::get_fontletter
EXTRN	?TexActivate@VidD3D@@UAEKPAVVidTex@@W4vidtexactivatetype_t@@@Z:NEAR ; VidD3D::TexActivate
EXTRN	?TexLoad@VidD3D@@UAEPAVVidTex@@PBDEKK@Z:NEAR	; VidD3D::TexLoad
EXTRN	?TexLoadBMP@VidD3D@@UAEPAVVidTex@@PBDEK@Z:NEAR	; VidD3D::TexLoadBMP
EXTRN	?TexLoadTGA@VidD3D@@UAEPAVVidTex@@PBDEK@Z:NEAR	; VidD3D::TexLoadTGA
EXTRN	?TexRelease@VidD3D@@UAEKPAVVidTex@@@Z:NEAR	; VidD3D::TexRelease
EXTRN	?TexReload@VidD3D@@UAEKPAVVidTex@@@Z:NEAR	; VidD3D::TexReload
EXTRN	?TexForName@VidD3D@@UAEPAVVidTex@@PBD@Z:NEAR	; VidD3D::TexForName
EXTRN	?GetBlankTex@VidD3D@@UAEPAVVidTex@@XZ:NEAR	; VidD3D::GetBlankTex
EXTRN	?LockScreen@VidD3D@@UAEKW4vidlockscreentype_t@@PAPAGPAH@Z:NEAR ; VidD3D::LockScreen
EXTRN	?UnlockScreen@VidD3D@@UAEXXZ:NEAR		; VidD3D::UnlockScreen
EXTRN	?BeginScene@VidD3D@@UAEXXZ:NEAR			; VidD3D::BeginScene
EXTRN	?EndScene@VidD3D@@UAEXXZ:NEAR			; VidD3D::EndScene
EXTRN	?SetHooptiFrustum@VidD3D@@UAEXMMMM@Z:NEAR	; VidD3D::SetHooptiFrustum
EXTRN	?ClipBad@VidD3D@@UAEXXZ:NEAR			; VidD3D::ClipBad
EXTRN	?ClipGood@VidD3D@@UAEXXZ:NEAR			; VidD3D::ClipGood
EXTRN	?BeginLines@VidD3D@@UAEXK@Z:NEAR		; VidD3D::BeginLines
EXTRN	?EndLines@VidD3D@@UAEXXZ:NEAR			; VidD3D::EndLines
;	COMDAT ??_7VidD3D@@6B@
; File D:\Games\duke_nukem_forever\Hacked\MeshEd\vidd3d\dev.cpp
CONST	SEGMENT
??_7VidD3D@@6B@ DD FLAT:??_EVidD3D@@UAEPAXI@Z		; VidD3D::`vftable'
	DD	FLAT:?init@VidD3D@@UAEKPAVXWnd@@KKK@Z
	DD	FLAT:?close@VidD3D@@UAEKXZ
	DD	FLAT:?set_default@VidD3D@@UAEXXZ
	DD	FLAT:?Activate@VidD3D@@UAEXXZ
	DD	FLAT:?Deactivate@VidD3D@@UAEXXZ
	DD	FLAT:?Swap@VidD3D@@UAEKK@Z
	DD	FLAT:?ClearScreen@VidD3D@@UAEXK@Z
	DD	FLAT:?ClipWindow@VidD3D@@UAEXKKKK@Z
	DD	FLAT:?SetClipBounds@VidD3D@@UAEXKKKK@Z
	DD	FLAT:?DepthEnable@VidD3D@@UAEXE@Z
	DD	FLAT:?ColorWrite@VidD3D@@UAEXE@Z
	DD	FLAT:?DepthWrite@VidD3D@@UAEXE@Z
	DD	FLAT:?GetColor@VidIf@@UAEKXZ
	DD	FLAT:?FlatColor@VidD3D@@UAEXEEE@Z
	DD	FLAT:?FlatColor@VidIf@@UAEXK@Z
	DD	FLAT:?FlatAlpha@VidD3D@@UAEXE@Z
	DD	FLAT:?AlphaTestValue@VidD3D@@UAEEE@Z
	DD	FLAT:?ColorMode@VidD3D@@UAE?AW4vidcolormodetype_t@@W42@@Z
	DD	FLAT:?AlphaMode@VidD3D@@UAE?AW4vidalphamodetype_t@@W42@@Z
	DD	FLAT:?BlendMode@VidD3D@@UAE?AW4vidblendmodetype_t@@W42@@Z
	DD	FLAT:?WindingMode@VidD3D@@UAE?AW4vidwindingmodetype_t@@W42@@Z
	DD	FLAT:?MinFilterMode@VidD3D@@UAE?AW4vidfiltermodetype_t@@W42@@Z
	DD	FLAT:?MagFilterMode@VidD3D@@UAE?AW4vidfiltermodetype_t@@W42@@Z
	DD	FLAT:?AlphaTestMode@VidD3D@@UAE?AW4vidatestmodetype_t@@W42@@Z
	DD	FLAT:?DepthFunc@VidD3D@@UAE?AW4zfunc_modetype_t@@W42@@Z
	DD	FLAT:?AlphaTestEnable@VidD3D@@UAEKK@Z
	DD	FLAT:?ForceDraw@VidD3D@@UAEXE@Z
	DD	FLAT:?Antialias@VidD3D@@UAEXE@Z
	DD	FLAT:?draw_polygon@VidD3D@@UAEXKPAVCVert@@@Z
	DD	FLAT:?DrawLine@VidD3D@@UAEXPAUvector_str@@000@Z
	DD	FLAT:?DrawLineBox@VidD3D@@UAEXPAUvector_str@@000@Z
	DD	FLAT:?DrawTriangle@VidD3D@@UAEXPAUvector_str@@0PAM0@Z
	DD	FLAT:?DrawClippedPolygon@VidD3D@@UAEXKPAUvector_str@@0PAM0@Z
	DD	FLAT:?DrawPolygon@VidD3D@@UAEXKPAUvector_str@@0PAM0@Z
	DD	FLAT:?DrawPolygonFlags@VidD3D@@UAEXKKPAUvector_str@@0PAM0@Z
	DD	FLAT:?DrawString@VidD3D@@UAEXHHHHPADEHHH@Z
	DD	FLAT:?is_char_drawable@VidD3D@@UAEKD@Z
	DD	FLAT:?SetFontTexture@VidD3D@@UAEXXZ
	DD	FLAT:?get_fontdim@VidD3D@@UAEXPAM0@Z
	DD	FLAT:?get_fontletter@VidD3D@@UAEXDPAM0@Z
	DD	FLAT:?TexActivate@VidD3D@@UAEKPAVVidTex@@W4vidtexactivatetype_t@@@Z
	DD	FLAT:?TexLoad@VidD3D@@UAEPAVVidTex@@PBDEKK@Z
	DD	FLAT:?TexLoadBMP@VidD3D@@UAEPAVVidTex@@PBDEK@Z
	DD	FLAT:?TexLoadTGA@VidD3D@@UAEPAVVidTex@@PBDEK@Z
	DD	FLAT:?TexRelease@VidD3D@@UAEKPAVVidTex@@@Z
	DD	FLAT:?TexReload@VidD3D@@UAEKPAVVidTex@@@Z
	DD	FLAT:?TexForName@VidD3D@@UAEPAVVidTex@@PBD@Z
	DD	FLAT:?GetBlankTex@VidD3D@@UAEPAVVidTex@@XZ
	DD	FLAT:?LockScreen@VidD3D@@UAEKW4vidlockscreentype_t@@PAPAGPAH@Z
	DD	FLAT:?UnlockScreen@VidD3D@@UAEXXZ
	DD	FLAT:?BeginScene@VidD3D@@UAEXXZ
	DD	FLAT:?EndScene@VidD3D@@UAEXXZ
	DD	FLAT:?ClipBad@VidD3D@@UAEXXZ
	DD	FLAT:?ClipGood@VidD3D@@UAEXXZ
	DD	FLAT:?Diags@VidD3D@@UAEXXZ
	DD	FLAT:?SetHooptiFrustum@VidD3D@@UAEXMMMM@Z
	DD	FLAT:?BeginLines@VidD3D@@UAEXK@Z
	DD	FLAT:?EndLines@VidD3D@@UAEXXZ
CONST	ENDS
_TEXT	SEGMENT
_this$ = -4
??0VidD3D@@QAE@XZ PROC NEAR				; VidD3D::VidD3D

; 4    : {

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	??0VidIf@@QAE@XZ			; VidIf::VidIf
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+36], 0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+40], 0
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+44], 0
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+48], 0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+52], 0
	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 56					; 00000038H
	call	??0D3DState@@QAE@XZ			; D3DState::D3DState
	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 288				; 00000120H
	call	DWORD PTR __imp_??0ImgDevice@@QAE@XZ
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+300], 0
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+304], 0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+308], 0
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+312], 0
	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 316				; 0000013cH
	call	??0TexList@@QAE@XZ			; TexList::TexList
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax], OFFSET FLAT:??_7VidD3D@@6B@ ; VidD3D::`vftable'

; 5    : }

	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	0
??0VidD3D@@QAE@XZ ENDP					; VidD3D::VidD3D
_TEXT	ENDS
;	COMDAT ?GetColor@VidIf@@UAEKXZ
_TEXT	SEGMENT
_this$ = -4
?GetColor@VidIf@@UAEKXZ PROC NEAR			; VidIf::GetColor, COMDAT

; 267  : 	{

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx

; 268  : 		return ((vid_state.color_a<<24) | 
; 269  : 				(vid_state.color_r<<16) |
; 270  : 				(vid_state.color_g<<8) |
; 271  : 				(vid_state.color_b));

	mov	eax, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [eax+8]
	shr	eax, 24					; 00000018H
	and	eax, 255				; 000000ffH
	shl	eax, 24					; 00000018H
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+12]
	and	edx, 255				; 000000ffH
	shl	edx, 16					; 00000010H
	or	eax, edx
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+12]
	shr	edx, 8
	and	edx, 255				; 000000ffH
	shl	edx, 8
	or	eax, edx
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+12]
	shr	edx, 16					; 00000010H
	and	edx, 255				; 000000ffH
	or	eax, edx

; 272  : 	}

	mov	esp, ebp
	pop	ebp
	ret	0
?GetColor@VidIf@@UAEKXZ ENDP				; VidIf::GetColor
_TEXT	ENDS
;	COMDAT ?FlatColor@VidIf@@UAEXK@Z
_TEXT	SEGMENT
_color$ = 8
_this$ = -4
?FlatColor@VidIf@@UAEXK@Z PROC NEAR			; VidIf::FlatColor, COMDAT

; 274  : 	{

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx

; 275  : 		vid_state.color_a=color>>24;

	mov	eax, DWORD PTR _color$[ebp]
	shr	eax, 24					; 00000018H
	and	eax, 255				; 000000ffH
	shl	eax, 24					; 00000018H
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+8]
	and	edx, 16777215				; 00ffffffH
	or	edx, eax
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+8], edx

; 276  : 		vid_state.color_r=(color>>16)&0xFF;

	mov	ecx, DWORD PTR _color$[ebp]
	shr	ecx, 16					; 00000010H
	and	ecx, 255				; 000000ffH
	and	ecx, 255				; 000000ffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+12]
	and	al, 0
	or	eax, ecx
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+12], eax

; 277  : 		vid_state.color_g=(color>>8)&0xFF;

	mov	edx, DWORD PTR _color$[ebp]
	shr	edx, 8
	and	edx, 255				; 000000ffH
	and	edx, 255				; 000000ffH
	shl	edx, 8
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+12]
	and	ch, 0
	or	ecx, edx
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+12], ecx

; 278  : 		vid_state.color_b=(color)&0xFF;

	mov	eax, DWORD PTR _color$[ebp]
	and	eax, 255				; 000000ffH
	and	eax, 255				; 000000ffH
	shl	eax, 16					; 00000010H
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+12]
	and	edx, -16711681				; ff00ffffH
	or	edx, eax
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+12], edx

; 279  : 	}

	mov	esp, ebp
	pop	ebp
	ret	4
?FlatColor@VidIf@@UAEXK@Z ENDP				; VidIf::FlatColor
_TEXT	ENDS
PUBLIC	??0?$XList@VVidTexD3D@@@@QAE@KK@Z		; XList<VidTexD3D>::XList<VidTexD3D>
;	COMDAT ??0TexList@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4
??0TexList@@QAE@XZ PROC NEAR				; TexList::TexList, COMDAT

; 281  : 	TexList(void) : XList<VidTexD3D>(32,TRUE) {}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	push	1
	push	32					; 00000020H
	mov	ecx, DWORD PTR _this$[ebp]
	call	??0?$XList@VVidTexD3D@@@@QAE@KK@Z	; XList<VidTexD3D>::XList<VidTexD3D>
	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	0
??0TexList@@QAE@XZ ENDP					; TexList::TexList
_TEXT	ENDS
;	COMDAT ??0D3DState@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4
??0D3DState@@QAE@XZ PROC NEAR				; D3DState::D3DState, COMDAT

; 389  : 					color1_arg2(0),color2_arg2(),alpha1_arg2(),alpha2_arg2(){}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -16				; fffffff0H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	cl, 15					; 0000000fH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ch, -32					; ffffffe0H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -253953				; fffc1fffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -8126465				; ff83ffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -260046849				; f07fffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ecx, -32				; ffffffe0H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ecx, -993				; fffffc1fH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	BYTE PTR [eax+8], 0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	BYTE PTR [ecx+12], 0
	mov	edx, DWORD PTR _this$[ebp]
	mov	BYTE PTR [edx+16], 0
	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	0
??0D3DState@@QAE@XZ ENDP				; D3DState::D3DState
_TEXT	ENDS
PUBLIC	??1VidD3D@@UAE@XZ				; VidD3D::~VidD3D
;	COMDAT ??_GVidD3D@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8
_this$ = -4
??_GVidD3D@@UAEPAXI@Z PROC NEAR				; VidD3D::`scalar deleting destructor', COMDAT
	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	??1VidD3D@@UAE@XZ			; VidD3D::~VidD3D
	mov	eax, DWORD PTR ___flags$[ebp]
	and	eax, 1
	test	eax, eax
	je	SHORT $L65202
	mov	ecx, DWORD PTR _this$[ebp]
	push	ecx
	call	??3@YAXPAX@Z				; operator delete
	add	esp, 4
$L65202:
	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	4
??_GVidD3D@@UAEPAXI@Z ENDP				; VidD3D::`scalar deleting destructor'
_TEXT	ENDS
PUBLIC	??0VidState@@QAE@XZ				; VidState::VidState
PUBLIC	?BeginScene@VidIf@@UAEXXZ			; VidIf::BeginScene
PUBLIC	?EndScene@VidIf@@UAEXXZ				; VidIf::EndScene
PUBLIC	?Diags@VidIf@@UAEXXZ				; VidIf::Diags
PUBLIC	?BeginLines@VidIf@@UAEXK@Z			; VidIf::BeginLines
PUBLIC	?EndLines@VidIf@@UAEXXZ				; VidIf::EndLines
PUBLIC	??_7VidIf@@6B@					; VidIf::`vftable'
PUBLIC	??_GVidIf@@UAEPAXI@Z				; VidIf::`scalar deleting destructor'
PUBLIC	??_EVidIf@@UAEPAXI@Z				; VidIf::`vector deleting destructor'
EXTRN	__purecall:NEAR
;	COMDAT ??_7VidIf@@6B@
CONST	SEGMENT
??_7VidIf@@6B@ DD FLAT:??_EVidIf@@UAEPAXI@Z		; VidIf::`vftable'
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:?GetColor@VidIf@@UAEKXZ
	DD	FLAT:__purecall
	DD	FLAT:?FlatColor@VidIf@@UAEXK@Z
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:?BeginScene@VidIf@@UAEXXZ
	DD	FLAT:?EndScene@VidIf@@UAEXXZ
	DD	FLAT:__purecall
	DD	FLAT:__purecall
	DD	FLAT:?Diags@VidIf@@UAEXXZ
	DD	FLAT:__purecall
	DD	FLAT:?BeginLines@VidIf@@UAEXK@Z
	DD	FLAT:?EndLines@VidIf@@UAEXXZ
CONST	ENDS
;	COMDAT ??0VidIf@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4
??0VidIf@@QAE@XZ PROC NEAR				; VidIf::VidIf, COMDAT
	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 4
	call	??0VidState@@QAE@XZ			; VidState::VidState
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax], OFFSET FLAT:??_7VidIf@@6B@ ; VidIf::`vftable'
	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	0
??0VidIf@@QAE@XZ ENDP					; VidIf::VidIf
_TEXT	ENDS
;	COMDAT ??0VidState@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4
??0VidState@@QAE@XZ PROC NEAR				; VidState::VidState, COMDAT

; 231  : 					clip_x(0),clip_y(0),clip_width(0),clip_height(){}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -2					; fffffffeH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -3					; fffffffdH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -5					; fffffffbH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -9					; fffffff7H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -17				; ffffffefH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -33				; ffffffdfH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -65				; ffffffbfH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	cl, 127					; 0000007fH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ch, -16					; fffffff0H
	or	ch, 8
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	or	ch, 16					; 00000010H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	or	ch, 32					; 00000020H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -114689				; fffe3fffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -917505				; fff1ffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -7340033				; ff8fffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -8388609				; ff7fffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -16777217				; feffffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	and	ecx, -33554433				; fdffffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	cl, 0
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ch, -16					; fffffff0H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ch, -113				; ffffff8fH
	or	ch, 16					; 00000010H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ecx, -229377				; fffc7fffH
	or	ch, -128				; ffffff80H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ecx, -1835009				; ffe3ffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ecx, -6291457				; ff9fffffH
	or	ecx, 2097152				; 00200000H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	or	ecx, 8388608				; 00800000H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ecx, 16777215				; 00ffffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+8]
	and	cl, 0
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+8], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+8]
	and	ch, 0
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+8], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+8]
	and	ecx, -16711681				; ff00ffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+8], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	WORD PTR [eax+12], 0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	WORD PTR [ecx+14], 0
	mov	edx, DWORD PTR _this$[ebp]
	mov	WORD PTR [edx+16], 0
	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	0
??0VidState@@QAE@XZ ENDP				; VidState::VidState
_TEXT	ENDS
;	COMDAT ?BeginScene@VidIf@@UAEXXZ
_TEXT	SEGMENT
_this$ = -4
?BeginScene@VidIf@@UAEXXZ PROC NEAR			; VidIf::BeginScene, COMDAT

; 327  : 	virtual void BeginScene(void){}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	esp, ebp
	pop	ebp
	ret	0
?BeginScene@VidIf@@UAEXXZ ENDP				; VidIf::BeginScene
_TEXT	ENDS
;	COMDAT ?EndScene@VidIf@@UAEXXZ
_TEXT	SEGMENT
_this$ = -4
?EndScene@VidIf@@UAEXXZ PROC NEAR			; VidIf::EndScene, COMDAT

; 328  : 	virtual void EndScene(void){}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	esp, ebp
	pop	ebp
	ret	0
?EndScene@VidIf@@UAEXXZ ENDP				; VidIf::EndScene
_TEXT	ENDS
;	COMDAT ?Diags@VidIf@@UAEXXZ
_TEXT	SEGMENT
_this$ = -4
?Diags@VidIf@@UAEXXZ PROC NEAR				; VidIf::Diags, COMDAT

; 332  : 	virtual void Diags(void){}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	esp, ebp
	pop	ebp
	ret	0
?Diags@VidIf@@UAEXXZ ENDP				; VidIf::Diags
_TEXT	ENDS
;	COMDAT ?BeginLines@VidIf@@UAEXK@Z
_TEXT	SEGMENT
_this$ = -4
?BeginLines@VidIf@@UAEXK@Z PROC NEAR			; VidIf::BeginLines, COMDAT

; 336  : 	virtual void BeginLines(U32 guess_num){}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	esp, ebp
	pop	ebp
	ret	4
?BeginLines@VidIf@@UAEXK@Z ENDP				; VidIf::BeginLines
_TEXT	ENDS
;	COMDAT ?EndLines@VidIf@@UAEXXZ
_TEXT	SEGMENT
_this$ = -4
?EndLines@VidIf@@UAEXXZ PROC NEAR			; VidIf::EndLines, COMDAT

; 337  : 	virtual void EndLines(void){}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	esp, ebp
	pop	ebp
	ret	0
?EndLines@VidIf@@UAEXXZ ENDP				; VidIf::EndLines
_TEXT	ENDS
PUBLIC	??1VidIf@@UAE@XZ				; VidIf::~VidIf
;	COMDAT ??_GVidIf@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8
_this$ = -4
??_GVidIf@@UAEPAXI@Z PROC NEAR				; VidIf::`scalar deleting destructor', COMDAT
	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	??1VidIf@@UAE@XZ			; VidIf::~VidIf
	mov	eax, DWORD PTR ___flags$[ebp]
	and	eax, 1
	test	eax, eax
	je	SHORT $L57330
	mov	ecx, DWORD PTR _this$[ebp]
	push	ecx
	call	??3@YAXPAX@Z				; operator delete
	add	esp, 4
$L57330:
	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	4
??_GVidIf@@UAEPAXI@Z ENDP				; VidIf::`scalar deleting destructor'
_TEXT	ENDS
;	COMDAT ??1VidIf@@UAE@XZ
_TEXT	SEGMENT
_this$ = -4
??1VidIf@@UAE@XZ PROC NEAR				; VidIf::~VidIf, COMDAT

; 249  : 	virtual ~VidIf(void){}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax], OFFSET FLAT:??_7VidIf@@6B@ ; VidIf::`vftable'
	mov	esp, ebp
	pop	ebp
	ret	0
??1VidIf@@UAE@XZ ENDP					; VidIf::~VidIf
_TEXT	ENDS
PUBLIC	??1TexList@@QAE@XZ				; TexList::~TexList
_TEXT	SEGMENT
_this$ = -4
??1VidD3D@@UAE@XZ PROC NEAR				; VidD3D::~VidD3D

; 8    : {

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax], OFFSET FLAT:??_7VidD3D@@6B@ ; VidD3D::`vftable'

; 9    : 	close();

	mov	ecx, DWORD PTR _this$[ebp]
	call	?close@VidD3D@@UAEKXZ			; VidD3D::close

; 10   : }

	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 316				; 0000013cH
	call	??1TexList@@QAE@XZ			; TexList::~TexList
	mov	ecx, DWORD PTR _this$[ebp]
	call	??1VidIf@@UAE@XZ			; VidIf::~VidIf
	mov	esp, ebp
	pop	ebp
	ret	0
??1VidD3D@@UAE@XZ ENDP					; VidD3D::~VidD3D
_TEXT	ENDS
PUBLIC	??1?$XList@VVidTexD3D@@@@QAE@XZ			; XList<VidTexD3D>::~XList<VidTexD3D>
;	COMDAT ??1TexList@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4
??1TexList@@QAE@XZ PROC NEAR				; TexList::~TexList, COMDAT
	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	??1?$XList@VVidTexD3D@@@@QAE@XZ		; XList<VidTexD3D>::~XList<VidTexD3D>
	mov	esp, ebp
	pop	ebp
	ret	0
??1TexList@@QAE@XZ ENDP					; TexList::~TexList
_TEXT	ENDS
PUBLIC	?get_hwnd@XWnd@@QAEPAUHWND__@@XZ		; XWnd::get_hwnd
PUBLIC	?create_device@VidD3D@@IAEKPAVXWnd@@KKK@Z	; VidD3D::create_device
PUBLIC	?create_vbuffers@VidD3D@@IAEXXZ			; VidD3D::create_vbuffers
EXTRN	__imp_?set_support@ImgDevice@@QAEXK@Z:NEAR
EXTRN	__imp_?set_restrict@ImgDevice@@QAEXK@Z:NEAR
EXTRN	?DXTraceA@@YGJPADKJ0H@Z:NEAR			; DXTraceA
EXTRN	??0ViewD3D@@QAE@PAVXWnd@@PAUIDirect3DDevice8@@KKK@Z:NEAR ; ViewD3D::ViewD3D
EXTRN	_memset:NEAR
EXTRN	__imp_@xxx_fatal@4:NEAR
_DATA	SEGMENT
$SG65223 DB	'Couldn''t Get Adapter Display Mode', 00H
	ORG $+2
$SG65224 DB	'D:\Games\duke_nukem_forever\Hacked\MeshEd\vidd3d\dev.cpp'
	DB	00H
	ORG $+3
$SG65228 DB	'Couldn''t Create D3D8 Device', 00H
$SG65229 DB	'D:\Games\duke_nukem_forever\Hacked\MeshEd\vidd3d\dev.cpp'
	DB	00H
	ORG $+3
$SG65232 DB	'Unable to get device caps', 00H
_DATA	ENDS
_TEXT	SEGMENT
$T65855 = -80
_wnd$ = 8
_width$ = 12
_height$ = 16
_byte_pp$ = 20
_this$ = -84
_mode$ = -76
_hResult$ = -60
_has_stencil$ = -56
_present$ = -52
?create_device@VidD3D@@IAEKPAVXWnd@@KKK@Z PROC NEAR	; VidD3D::create_device

; 13   : {

	push	ebp
	mov	ebp, esp
	sub	esp, 88					; 00000058H
	mov	DWORD PTR _this$[ebp], ecx

; 14   : 	/*num_adaptor=id3d->GetAdapterCount();
; 15   : 
; 16   : 	adaptor_id=D3DADAPTER_DEFAULT;
; 17   : 
; 18   : 	U32 i,mode_count;
; 19   : 	
; 20   : 	mode_count=id3d->GetAdapterModeCount(adaptor_id);
; 21   : 
; 22   : 	U32 bformat,dformat,has_stencil;
; 23   : 
; 24   : 	has_stencil=FALSE;
; 25   : 	switch(byte_pp)
; 26   : 	{
; 27   : 		case 2:
; 28   : 			bformat=D3DFMT_R5G6B5;
; 29   : 			dformat=D3DFMT_D16;
; 30   : 			break;
; 31   : 		case 3:
; 32   : 			bformat=D3DFMT_X8R8G8B8;
; 33   : 			dformat=D3DFMT_D32;
; 34   : 			break;
; 35   : 		case 4:
; 36   : 			bformat=D3DFMT_A8R8G8B8;
; 37   : 			dformat=D3DFMT_D24S8;
; 38   : 			has_stencil=TRUE;
; 39   : 			break;
; 40   : 		default:
; 41   : 			return FALSE;
; 42   : 	}
; 43   : 	
; 44   : 	for (i=0;i<mode_count;i++)
; 45   : 	{
; 46   : 		D3DDISPLAYMODE mode;
; 47   : 
; 48   : 		if (id3d->EnumAdapterModes(adaptor_id,i,&mode)==D3D_OK)
; 49   : 		{
; 50   : 			if ((mode.Width==width) && (mode.Height=height) && ((U32)mode.Format==bformat))
; 51   : 				break;
; 52   : 		}
; 53   : 	}
; 54   : 	if (i==mode_count)
; 55   : 		return FALSE;*/
; 56   : 	D3DDISPLAYMODE mode;
; 57   : 	HRESULT hResult;
; 58   : 	U32 has_stencil=FALSE;

	mov	DWORD PTR _has_stencil$[ebp], 0

; 59   : 
; 60   : 	hResult = id3d->GetAdapterDisplayMode(D3DADAPTER_DEFAULT, &mode);

	lea	eax, DWORD PTR _mode$[ebp]
	push	eax
	push	0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+36]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+36]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+32]
	mov	DWORD PTR _hResult$[ebp], eax

; 61   : 	if (hResult!=D3D_OK) {

	cmp	DWORD PTR _hResult$[ebp], 0
	je	SHORT $L65222

; 62   : 		DXTrace(__FILE__,__LINE__, hResult, "Couldn't Get Adapter Display Mode", TRUE);

	push	1
	push	OFFSET FLAT:$SG65223
	mov	ecx, DWORD PTR _hResult$[ebp]
	push	ecx
	push	62					; 0000003eH
	push	OFFSET FLAT:$SG65224
	call	?DXTraceA@@YGJPADKJ0H@Z			; DXTraceA

; 63   : 		return FALSE;

	xor	eax, eax
	jmp	$L65217
$L65222:

; 67   : 	ZeroMemory(&present, sizeof(present));

	push	52					; 00000034H
	push	0
	lea	edx, DWORD PTR _present$[ebp]
	push	edx
	call	_memset
	add	esp, 12					; 0000000cH

; 68   : 
; 69   : 	present.Windowed = FALSE;

	mov	DWORD PTR _present$[ebp+28], 0

; 70   : 	present.hDeviceWindow = wnd->get_hwnd();

	mov	ecx, DWORD PTR _wnd$[ebp]
	call	?get_hwnd@XWnd@@QAEPAUHWND__@@XZ	; XWnd::get_hwnd
	mov	DWORD PTR _present$[ebp+24], eax

; 71   : 	present.SwapEffect=D3DSWAPEFFECT_FLIP;

	mov	DWORD PTR _present$[ebp+20], 2

; 72   : 	present.BackBufferCount=1;

	mov	DWORD PTR _present$[ebp+12], 1

; 73   : 	present.BackBufferWidth=width;

	mov	eax, DWORD PTR _width$[ebp]
	mov	DWORD PTR _present$[ebp], eax

; 74   : 	present.BackBufferHeight=height;

	mov	ecx, DWORD PTR _height$[ebp]
	mov	DWORD PTR _present$[ebp+4], ecx

; 75   : 	present.BackBufferFormat=mode.Format;

	mov	edx, DWORD PTR _mode$[ebp+12]
	mov	DWORD PTR _present$[ebp+8], edx

; 76   : 	present.FullScreen_RefreshRateInHz=D3DPRESENT_RATE_DEFAULT;

	mov	DWORD PTR _present$[ebp+44], 0

; 77   : 	present.FullScreen_PresentationInterval=D3DPRESENT_INTERVAL_ONE;

	mov	DWORD PTR _present$[ebp+48], 1

; 78   : 
; 79   : 
; 80   : 	/*present.BackBufferWidth=width;
; 81   : 	present.BackBufferHeight=height;
; 82   : 	present.BackBufferFormat=(D3DFORMAT)bformat;
; 83   : 	present.BackBufferCount=1;
; 84   : 	present.MultiSampleType=D3DMULTISAMPLE_NONE;
; 85   : 	present.SwapEffect=D3DSWAPEFFECT_FLIP;
; 86   : 
; 87   : 	present.hDeviceWindow=wnd->get_hwnd();
; 88   : 	present.Windowed=TRUE;
; 89   : 	present.EnableAutoDepthStencil=TRUE;
; 90   : 	present.AutoDepthStencilFormat=(D3DFORMAT)dformat;
; 91   : 
; 92   : 	present.Flags=D3DPRESENTFLAG_LOCKABLE_BACKBUFFER;
; 93   : 	present.FullScreen_RefreshRateInHz=D3DPRESENT_RATE_DEFAULT;
; 94   : 	present.FullScreen_PresentationInterval=D3DPRESENT_INTERVAL_ONE;*/
; 95   : 
; 96   : 	dev=null;

	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+40], 0

; 97   : 	/*if (id3d->CreateDevice(adaptor_id,D3DDEVTYPE_HAL,wnd->get_hwnd(),D3DCREATE_MIXED_VERTEXPROCESSING,&present,&dev)!=D3D_OK)
; 98   : 		return FALSE;
; 99   : 	*/
; 100  : 	hResult = id3d->CreateDevice(D3DADAPTER_DEFAULT,D3DDEVTYPE_HAL,wnd->get_hwnd(),D3DCREATE_HARDWARE_VERTEXPROCESSING,&present,&dev);

	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 40					; 00000028H
	push	ecx
	lea	edx, DWORD PTR _present$[ebp]
	push	edx
	push	64					; 00000040H
	mov	ecx, DWORD PTR _wnd$[ebp]
	call	?get_hwnd@XWnd@@QAEPAUHWND__@@XZ	; XWnd::get_hwnd
	push	eax
	push	1
	push	0
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+36]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+36]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+60]
	mov	DWORD PTR _hResult$[ebp], eax

; 101  : 	if (hResult!=D3D_OK) {

	cmp	DWORD PTR _hResult$[ebp], 0
	je	SHORT $L65227

; 102  : 		DXTrace(__FILE__,__LINE__, hResult, "Couldn't Create D3D8 Device", TRUE);

	push	1
	push	OFFSET FLAT:$SG65228
	mov	eax, DWORD PTR _hResult$[ebp]
	push	eax
	push	102					; 00000066H
	push	OFFSET FLAT:$SG65229
	call	?DXTraceA@@YGJPADKJ0H@Z			; DXTraceA

; 103  : 		return FALSE;

	xor	eax, eax
	jmp	$L65217
$L65227:

; 105  : 	if (id3d->GetDeviceCaps(D3DADAPTER_DEFAULT,D3DDEVTYPE_HAL,&caps)!=D3D_OK)

	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 76					; 0000004cH
	push	ecx
	push	1
	push	0
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+36]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+36]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+52]
	test	eax, eax
	je	SHORT $L65231

; 106  : 		xxx_fatal("Unable to get device caps");

	mov	ecx, OFFSET FLAT:$SG65232
	call	DWORD PTR __imp_@xxx_fatal@4
$L65231:

; 107  : 
; 108  : 	vid_state.has_stencil=has_stencil;

	mov	edx, DWORD PTR _has_stencil$[ebp]
	and	edx, 1
	shl	edx, 4
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ecx, -17				; ffffffefH
	or	ecx, edx
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx

; 109  : 
; 110  : 	img_device.set_support(IMG_SUPPORTS_RGB_565|
; 111  : 						IMG_SUPPORTS_ARGB_1555|
; 112  : 						IMG_SUPPORTS_ARGB_4444);

	push	104					; 00000068H
	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 288				; 00000120H
	call	DWORD PTR __imp_?set_support@ImgDevice@@QAEXK@Z

; 113  : 
; 114  : 	img_device.set_restrict(IMG_RESTRICT_NO_32|
; 115  : 						IMG_RESTRICT_POW_2|
; 116  : 						IMG_RESTRICT_256|
; 117  : 						IMG_RESTRICT_ASPECT_8);

	push	58					; 0000003aH
	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 288				; 00000120H
	call	DWORD PTR __imp_?set_restrict@ImgDevice@@QAEXK@Z

; 118  : 
; 119  : 	res.width=width;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR _width$[ebp]
	mov	DWORD PTR [eax+24], ecx

; 120  : 	res.height=height;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR _height$[ebp]
	mov	DWORD PTR [edx+28], eax

; 121  : 	res.bpp=byte_pp;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR _byte_pp$[ebp]
	mov	DWORD PTR [ecx+32], edx

; 122  : 
; 123  : 	view=new ViewD3D(wnd,dev,width,height,byte_pp);

	push	24					; 00000018H
	call	??2@YAPAXI@Z				; operator new
	add	esp, 4
	mov	DWORD PTR $T65855[ebp], eax
	cmp	DWORD PTR $T65855[ebp], 0
	je	SHORT $L65856
	mov	eax, DWORD PTR _byte_pp$[ebp]
	push	eax
	mov	ecx, DWORD PTR _height$[ebp]
	push	ecx
	mov	edx, DWORD PTR _width$[ebp]
	push	edx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	push	ecx
	mov	edx, DWORD PTR _wnd$[ebp]
	push	edx
	mov	ecx, DWORD PTR $T65855[ebp]
	call	??0ViewD3D@@QAE@PAVXWnd@@PAUIDirect3DDevice8@@KKK@Z ; ViewD3D::ViewD3D
	mov	DWORD PTR -88+[ebp], eax
	jmp	SHORT $L65857
$L65856:
	mov	DWORD PTR -88+[ebp], 0
$L65857:
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR -88+[ebp]
	mov	DWORD PTR [eax+44], ecx

; 124  : 
; 125  : 	create_vbuffers();

	mov	ecx, DWORD PTR _this$[ebp]
	call	?create_vbuffers@VidD3D@@IAEXXZ		; VidD3D::create_vbuffers

; 126  : 
; 127  : 	return TRUE;

	mov	eax, 1
$L65217:

; 128  : }

	mov	esp, ebp
	pop	ebp
	ret	16					; 00000010H
?create_device@VidD3D@@IAEKPAVXWnd@@KKK@Z ENDP		; VidD3D::create_device
_TEXT	ENDS
;	COMDAT ?get_hwnd@XWnd@@QAEPAUHWND__@@XZ
_TEXT	SEGMENT
_this$ = -4
?get_hwnd@XWnd@@QAEPAUHWND__@@XZ PROC NEAR		; XWnd::get_hwnd, COMDAT

; 11   : 	inline HWND get_hwnd(void){return hwnd;}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [eax]
	mov	esp, ebp
	pop	ebp
	ret	0
?get_hwnd@XWnd@@QAEPAUHWND__@@XZ ENDP			; XWnd::get_hwnd
_TEXT	ENDS
EXTRN	?init_font@VidD3D@@IAEXXZ:NEAR			; VidD3D::init_font
EXTRN	_Direct3DCreate8@4:NEAR
_TEXT	SEGMENT
_wnd$ = 8
_width$ = 12
_height$ = 16
_byte_pp$ = 20
_this$ = -4
?init@VidD3D@@UAEKPAVXWnd@@KKK@Z PROC NEAR		; VidD3D::init

; 131  : {

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx

; 132  : 	if (id3d)

	mov	eax, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [eax+36], 0
	je	SHORT $L65242

; 133  : 		return FALSE;

	xor	eax, eax
	jmp	SHORT $L65241
$L65242:

; 134  : 	id3d=Direct3DCreate8(D3D_SDK_VERSION);

	push	120					; 00000078H
	call	_Direct3DCreate8@4
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+36], eax

; 135  : 	if (!id3d)

	mov	edx, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [edx+36], 0
	jne	SHORT $L65243

; 136  : 		return FALSE;

	xor	eax, eax
	jmp	SHORT $L65241
$L65243:

; 137  : 
; 138  : 	if (view)

	mov	eax, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [eax+44], 0
	je	SHORT $L65244

; 139  : 		return null;

	xor	eax, eax
	jmp	SHORT $L65241
$L65244:

; 140  : 
; 141  : 	dev_wnd=wnd;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR _wnd$[ebp]
	mov	DWORD PTR [ecx+312], edx

; 142  : 
; 143  : 	if (!create_device(wnd,width,height,byte_pp))

	mov	eax, DWORD PTR _byte_pp$[ebp]
	push	eax
	mov	ecx, DWORD PTR _height$[ebp]
	push	ecx
	mov	edx, DWORD PTR _width$[ebp]
	push	edx
	mov	eax, DWORD PTR _wnd$[ebp]
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	call	?create_device@VidD3D@@IAEKPAVXWnd@@KKK@Z ; VidD3D::create_device
	test	eax, eax
	jne	SHORT $L65245

; 144  : 		return FALSE;

	xor	eax, eax
	jmp	SHORT $L65241
$L65245:

; 145  : 
; 146  : 	set_default();

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+12]

; 147  : 
; 148  : 	init_font();

	mov	ecx, DWORD PTR _this$[ebp]
	call	?init_font@VidD3D@@IAEXXZ		; VidD3D::init_font

; 149  : 
; 150  : 	vid_state.active=TRUE;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	or	ecx, 1
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx

; 151  : 
; 152  : 	return TRUE;

	mov	eax, 1
$L65241:

; 153  : }

	mov	esp, ebp
	pop	ebp
	ret	16					; 00000010H
?init@VidD3D@@UAEKPAVXWnd@@KKK@Z ENDP			; VidD3D::init
_TEXT	ENDS
PUBLIC	??_GVManager@@QAEPAXI@Z				; VManager::`scalar deleting destructor'
EXTRN	?release_d3d@TexList@@QAEXXZ:NEAR		; TexList::release_d3d
EXTRN	__imp_@xxx_bitch@4:NEAR
_DATA	SEGMENT
	ORG $+2
$SG65253 DB	'VidD3D::close: still has locked surface', 00H
$SG65264 DB	'D3D Leak', 00H
_DATA	ENDS
_TEXT	SEGMENT
$T65862 = -8
$T65863 = -12
$T65866 = -16
$T65867 = -20
_this$ = -24
_d3d_leak$ = -4
?close@VidD3D@@UAEKXZ PROC NEAR				; VidD3D::close

; 156  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 32					; 00000020H
	mov	DWORD PTR _this$[ebp], ecx

; 157  : 	delete view;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+44]
	mov	DWORD PTR $T65863[ebp], ecx
	mov	edx, DWORD PTR $T65863[ebp]
	mov	DWORD PTR $T65862[ebp], edx
	cmp	DWORD PTR $T65862[ebp], 0
	je	SHORT $L65864
	push	1
	mov	eax, DWORD PTR $T65862[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR $T65862[ebp]
	call	DWORD PTR [edx]
	mov	DWORD PTR -28+[ebp], eax
	jmp	SHORT $L65865
$L65864:
	mov	DWORD PTR -28+[ebp], 0
$L65865:

; 158  : 	view=null;

	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+44], 0

; 159  : 
; 160  : 	//release_resources();
; 161  : 	if (locked_surf)

	mov	ecx, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [ecx+48], 0
	je	SHORT $L65252

; 163  : 		xxx_bitch("VidD3D::close: still has locked surface");

	mov	ecx, OFFSET FLAT:$SG65253
	call	DWORD PTR __imp_@xxx_bitch@4

; 164  : 		locked_surf->UnlockRect();

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+48]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+48]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+40]

; 165  : 		locked_surf->Release();

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+48]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+48]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+8]

; 166  : 		locked_surf=null;

	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+48], 0
$L65252:

; 168  : 	
; 169  : 	/* release texture resources */
; 170  : 	tex_list.release_d3d();

	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 316				; 0000013cH
	call	?release_d3d@TexList@@QAEXXZ		; TexList::release_d3d

; 171  : 
; 172  : 	if (vbuffers)

	mov	eax, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [eax+52], 0
	je	SHORT $L65869

; 173  : 		delete vbuffers;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+52]
	mov	DWORD PTR $T65867[ebp], edx
	mov	eax, DWORD PTR $T65867[ebp]
	mov	DWORD PTR $T65866[ebp], eax
	cmp	DWORD PTR $T65866[ebp], 0
	je	SHORT $L65868
	push	1
	mov	ecx, DWORD PTR $T65866[ebp]
	call	??_GVManager@@QAEPAXI@Z			; VManager::`scalar deleting destructor'
	mov	DWORD PTR -32+[ebp], eax
	jmp	SHORT $L65869
$L65868:
	mov	DWORD PTR -32+[ebp], 0
$L65869:

; 174  : 	vbuffers=null;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+52], 0

; 175  : 
; 176  : 	/* release device */
; 177  : 	U32 d3d_leak=FALSE;

	mov	DWORD PTR _d3d_leak$[ebp], 0

; 178  : 	if (dev)

	mov	edx, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [edx+40], 0
	je	SHORT $L65261
$L65260:

; 180  : 		while(dev->Release())

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+8]
	test	eax, eax
	je	SHORT $L65261

; 181  : 			d3d_leak=TRUE;

	mov	DWORD PTR _d3d_leak$[ebp], 1
	jmp	SHORT $L65260
$L65261:

; 183  : 	dev=null;

	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+40], 0

; 184  : 
; 185  : 	/* release interface */
; 186  : 	if (id3d)

	mov	ecx, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [ecx+36], 0
	je	SHORT $L65262

; 187  : 		id3d->Release();

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+36]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+36]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+8]
$L65262:

; 188  : 
; 189  : 	id3d=null;

	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+36], 0

; 190  : 
; 191  : 	if (d3d_leak)

	cmp	DWORD PTR _d3d_leak$[ebp], 0
	je	SHORT $L65263

; 192  : 		xxx_bitch("D3D Leak");

	mov	ecx, OFFSET FLAT:$SG65264
	call	DWORD PTR __imp_@xxx_bitch@4
$L65263:

; 193  : 
; 194  : 	return TRUE;

	mov	eax, 1

; 195  : }

	mov	esp, ebp
	pop	ebp
	ret	0
?close@VidD3D@@UAEKXZ ENDP				; VidD3D::close
_TEXT	ENDS
PUBLIC	??1VManager@@QAE@XZ				; VManager::~VManager
;	COMDAT ??_GVManager@@QAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8
_this$ = -4
??_GVManager@@QAEPAXI@Z PROC NEAR			; VManager::`scalar deleting destructor', COMDAT
	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	??1VManager@@QAE@XZ			; VManager::~VManager
	mov	eax, DWORD PTR ___flags$[ebp]
	and	eax, 1
	test	eax, eax
	je	SHORT $L65268
	mov	ecx, DWORD PTR _this$[ebp]
	push	ecx
	call	??3@YAXPAX@Z				; operator delete
	add	esp, 4
$L65268:
	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	4
??_GVManager@@QAEPAXI@Z ENDP				; VManager::`scalar deleting destructor'
_TEXT	ENDS
PUBLIC	??_GPrimBuffer@@QAEPAXI@Z			; PrimBuffer::`scalar deleting destructor'
PUBLIC	??1?$XRingChain@VVBuffer@@@@QAE@XZ		; XRingChain<VBuffer>::~XRingChain<VBuffer>
;	COMDAT ??1VManager@@QAE@XZ
_TEXT	SEGMENT
$T65873 = -4
$T65874 = -8
_this$ = -12
??1VManager@@QAE@XZ PROC NEAR				; VManager::~VManager, COMDAT

; 228  : 	~VManager(void){delete prims;}

	push	ebp
	mov	ebp, esp
	sub	esp, 16					; 00000010H
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+16]
	mov	DWORD PTR $T65874[ebp], ecx
	mov	edx, DWORD PTR $T65874[ebp]
	mov	DWORD PTR $T65873[ebp], edx
	cmp	DWORD PTR $T65873[ebp], 0
	je	SHORT $L65875
	push	1
	mov	ecx, DWORD PTR $T65873[ebp]
	call	??_GPrimBuffer@@QAEPAXI@Z		; PrimBuffer::`scalar deleting destructor'
	mov	DWORD PTR -16+[ebp], eax
	jmp	SHORT $L65876
$L65875:
	mov	DWORD PTR -16+[ebp], 0
$L65876:
	mov	ecx, DWORD PTR _this$[ebp]
	call	??1?$XRingChain@VVBuffer@@@@QAE@XZ	; XRingChain<VBuffer>::~XRingChain<VBuffer>
	mov	esp, ebp
	pop	ebp
	ret	0
??1VManager@@QAE@XZ ENDP				; VManager::~VManager
_TEXT	ENDS
PUBLIC	??1PrimBuffer@@QAE@XZ				; PrimBuffer::~PrimBuffer
EXTRN	__imp_??3MemGrow@@SAXPAX@Z:NEAR
;	COMDAT ??_GPrimBuffer@@QAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8
_this$ = -4
??_GPrimBuffer@@QAEPAXI@Z PROC NEAR			; PrimBuffer::`scalar deleting destructor', COMDAT
	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	??1PrimBuffer@@QAE@XZ			; PrimBuffer::~PrimBuffer
	mov	eax, DWORD PTR ___flags$[ebp]
	and	eax, 1
	test	eax, eax
	je	SHORT $L64525
	mov	ecx, DWORD PTR _this$[ebp]
	push	ecx
	call	DWORD PTR __imp_??3MemGrow@@SAXPAX@Z
	add	esp, 4
$L64525:
	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	4
??_GPrimBuffer@@QAEPAXI@Z ENDP				; PrimBuffer::`scalar deleting destructor'
_TEXT	ENDS
EXTRN	__imp_??1MemGrow@@QAE@XZ:NEAR
;	COMDAT ??1PrimBuffer@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4
??1PrimBuffer@@QAE@XZ PROC NEAR				; PrimBuffer::~PrimBuffer, COMDAT
	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR __imp_??1MemGrow@@QAE@XZ
	mov	esp, ebp
	pop	ebp
	ret	0
??1PrimBuffer@@QAE@XZ ENDP				; PrimBuffer::~PrimBuffer
_TEXT	ENDS
PUBLIC	?restore_state@VidD3D@@IAEXXZ			; VidD3D::restore_state
_TEXT	SEGMENT
_this$ = -4
?Activate@VidD3D@@UAEXXZ PROC NEAR			; VidD3D::Activate

; 198  : {

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx

; 199  : 	if (vid_state.active)

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ecx, 1
	test	ecx, ecx
	je	SHORT $L65273

; 200  : 		return;

	jmp	SHORT $L65272
$L65273:

; 201  : 
; 202  : 	create_device(dev_wnd,res.width,res.height,res.bpp);

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+32]
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+28]
	push	edx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+24]
	push	ecx
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+312]
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	call	?create_device@VidD3D@@IAEKPAVXWnd@@KKK@Z ; VidD3D::create_device

; 203  : 	
; 204  : 	restore_state();

	mov	ecx, DWORD PTR _this$[ebp]
	call	?restore_state@VidD3D@@IAEXXZ		; VidD3D::restore_state

; 205  : 
; 206  : 	vid_state.active=TRUE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+4]
	or	edx, 1
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+4], edx
$L65272:

; 207  : }

	mov	esp, ebp
	pop	ebp
	ret	0
?Activate@VidD3D@@UAEXXZ ENDP				; VidD3D::Activate
_TEXT	ENDS
_DATA	SEGMENT
	ORG $+3
$SG65282 DB	'VidD3D::close: still has locked surface', 00H
$SG65292 DB	'D3D Leak', 00H
_DATA	ENDS
_TEXT	SEGMENT
$T65884 = -8
$T65885 = -12
$T65888 = -16
$T65889 = -20
_this$ = -24
_d3d_leak$ = -4
?Deactivate@VidD3D@@UAEXXZ PROC NEAR			; VidD3D::Deactivate

; 210  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 32					; 00000020H
	mov	DWORD PTR _this$[ebp], ecx

; 211  : 	if (!vid_state.active)

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ecx, 1
	test	ecx, ecx
	jne	SHORT $L65278

; 212  : 		return;

	jmp	$L65277
$L65278:

; 213  : 
; 214  : 	delete view;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+44]
	mov	DWORD PTR $T65885[ebp], eax
	mov	ecx, DWORD PTR $T65885[ebp]
	mov	DWORD PTR $T65884[ebp], ecx
	cmp	DWORD PTR $T65884[ebp], 0
	je	SHORT $L65886
	push	1
	mov	edx, DWORD PTR $T65884[ebp]
	mov	eax, DWORD PTR [edx]
	mov	ecx, DWORD PTR $T65884[ebp]
	call	DWORD PTR [eax]
	mov	DWORD PTR -28+[ebp], eax
	jmp	SHORT $L65887
$L65886:
	mov	DWORD PTR -28+[ebp], 0
$L65887:

; 215  : 	view=null;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+44], 0

; 216  : 
; 217  : 	//release_resources();
; 218  : 	if (locked_surf)

	mov	edx, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [edx+48], 0
	je	SHORT $L65281

; 220  : 		xxx_bitch("VidD3D::close: still has locked surface");

	mov	ecx, OFFSET FLAT:$SG65282
	call	DWORD PTR __imp_@xxx_bitch@4

; 221  : 		locked_surf->UnlockRect();

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+48]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+48]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+40]

; 222  : 		locked_surf->Release();

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+48]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+48]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+8]

; 223  : 		locked_surf=null;

	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+48], 0
$L65281:

; 225  : 
; 226  : 	/* release texture resources */
; 227  : 	tex_list.release_d3d();

	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 316				; 0000013cH
	call	?release_d3d@TexList@@QAEXXZ		; TexList::release_d3d

; 228  : 
; 229  : 	if (vbuffers)

	mov	ecx, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [ecx+52], 0
	je	SHORT $L65891

; 230  : 		delete vbuffers;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+52]
	mov	DWORD PTR $T65889[ebp], eax
	mov	ecx, DWORD PTR $T65889[ebp]
	mov	DWORD PTR $T65888[ebp], ecx
	cmp	DWORD PTR $T65888[ebp], 0
	je	SHORT $L65890
	push	1
	mov	ecx, DWORD PTR $T65888[ebp]
	call	??_GVManager@@QAEPAXI@Z			; VManager::`scalar deleting destructor'
	mov	DWORD PTR -32+[ebp], eax
	jmp	SHORT $L65891
$L65890:
	mov	DWORD PTR -32+[ebp], 0
$L65891:

; 231  : 	vbuffers=null;

	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+52], 0

; 232  : 
; 233  : 	/* release device */
; 234  : 	U32 d3d_leak=FALSE;

	mov	DWORD PTR _d3d_leak$[ebp], 0

; 235  : 	if (dev)

	mov	eax, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [eax+40], 0
	je	SHORT $L65290
$L65289:

; 237  : 		while(dev->Release())

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+8]
	test	eax, eax
	je	SHORT $L65290

; 238  : 			d3d_leak=TRUE;

	mov	DWORD PTR _d3d_leak$[ebp], 1
	jmp	SHORT $L65289
$L65290:

; 240  : 	dev=null;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+40], 0

; 241  : 
; 242  : 	vid_state.active=FALSE;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+4]
	and	al, -2					; fffffffeH
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+4], eax

; 243  : 	
; 244  : 	if (d3d_leak)

	cmp	DWORD PTR _d3d_leak$[ebp], 0
	je	SHORT $L65291

; 245  : 		xxx_bitch("D3D Leak");

	mov	ecx, OFFSET FLAT:$SG65292
	call	DWORD PTR __imp_@xxx_bitch@4
$L65291:
$L65277:

; 246  : }

	mov	esp, ebp
	pop	ebp
	ret	0
?Deactivate@VidD3D@@UAEXXZ ENDP				; VidD3D::Deactivate
_TEXT	ENDS
PUBLIC	?_d_assert@@YAXPBDK@Z				; _d_assert
EXTRN	??0VManager@@QAE@PAVVidD3D@@PAUIDirect3DDevice8@@KKK@Z:NEAR ; VManager::VManager
_DATA	SEGMENT
	ORG $+3
$SG65302 DB	'D:\Games\duke_nukem_forever\Hacked\MeshEd\vidd3d\dev.cpp'
	DB	00H
_DATA	ENDS
_TEXT	SEGMENT
$T65893 = -8
_this$ = -12
_fvf$ = -4
?create_vbuffers@VidD3D@@IAEXXZ PROC NEAR		; VidD3D::create_vbuffers

; 249  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 16					; 00000010H
	mov	DWORD PTR _this$[ebp], ecx
$L65297:

; 250  : 	D_ASSERT(dev);

	mov	eax, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [eax+40], 0
	jne	SHORT $L65300
	push	250					; 000000faH
	push	OFFSET FLAT:$SG65302
	call	?_d_assert@@YAXPBDK@Z			; _d_assert
	add	esp, 8
$L65300:
	xor	ecx, ecx
	test	ecx, ecx
	jne	SHORT $L65297

; 251  : 	
; 252  : 	U32 fvf;
; 253  : 
; 254  : 	fvf=D3DFVF_XYZRHW|D3DFVF_DIFFUSE|D3DFVF_TEX1;

	mov	DWORD PTR _fvf$[ebp], 324		; 00000144H

; 255  : 	vbuffers=new VManager(this,dev,4,8192,fvf);

	push	52					; 00000034H
	call	??2@YAPAXI@Z				; operator new
	add	esp, 4
	mov	DWORD PTR $T65893[ebp], eax
	cmp	DWORD PTR $T65893[ebp], 0
	je	SHORT $L65894
	mov	edx, DWORD PTR _fvf$[ebp]
	push	edx
	push	8192					; 00002000H
	push	4
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	push	ecx
	mov	edx, DWORD PTR _this$[ebp]
	push	edx
	mov	ecx, DWORD PTR $T65893[ebp]
	call	??0VManager@@QAE@PAVVidD3D@@PAUIDirect3DDevice8@@KKK@Z ; VManager::VManager
	mov	DWORD PTR -16+[ebp], eax
	jmp	SHORT $L65895
$L65894:
	mov	DWORD PTR -16+[ebp], 0
$L65895:
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR -16+[ebp]
	mov	DWORD PTR [eax+52], ecx

; 256  : }

	mov	esp, ebp
	pop	ebp
	ret	0
?create_vbuffers@VidD3D@@IAEXXZ ENDP			; VidD3D::create_vbuffers
_TEXT	ENDS
EXTRN	__imp_?_global@@3PAVXGlobal@@A:DWORD
EXTRN	__imp_?assert@XGlobal@@QAEXPBDK@Z:NEAR
;	COMDAT ?_d_assert@@YAXPBDK@Z
_TEXT	SEGMENT
_file$ = 8
_line$ = 12
?_d_assert@@YAXPBDK@Z PROC NEAR				; _d_assert, COMDAT

; 1483 : {

	push	ebp
	mov	ebp, esp

; 1484 : 	_global->assert(file,line);

	mov	eax, DWORD PTR _line$[ebp]
	push	eax
	mov	ecx, DWORD PTR _file$[ebp]
	push	ecx
	mov	edx, DWORD PTR __imp_?_global@@3PAVXGlobal@@A
	mov	ecx, DWORD PTR [edx]
	call	DWORD PTR __imp_?assert@XGlobal@@QAEXPBDK@Z

; 1485 : }

	pop	ebp
	ret	0
?_d_assert@@YAXPBDK@Z ENDP				; _d_assert
_TEXT	ENDS
PUBLIC	?depth_init@VidD3D@@IAEXXZ			; VidD3D::depth_init
_TEXT	SEGMENT
_this$ = -4
?depth_init@VidD3D@@IAEXXZ PROC NEAR			; VidD3D::depth_init

; 259  : {

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx

; 260  : 	if (caps.RasterCaps & D3DPRASTERCAPS_WBUFFER)

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+112]
	and	ecx, 262144				; 00040000H
	test	ecx, ecx
	je	SHORT $L65310

; 261  : 		vid_state.support_wbuffer=TRUE;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+4]
	or	al, 8
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+4], eax
$L65310:

; 262  : 
; 263  : 	if (vid_state.support_wbuffer)

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+4]
	shr	eax, 3
	and	eax, 1
	test	eax, eax
	je	SHORT $L65311

; 264  : 		dev->SetRenderState(D3DRS_ZENABLE,D3DZB_USEW);

	push	2
	push	7
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+200]

; 265  : 	else

	jmp	SHORT $L65312
$L65311:

; 266  : 		dev->SetRenderState(D3DRS_ZENABLE,D3DZB_TRUE);

	push	1
	push	7
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+200]
$L65312:

; 267  : 
; 268  : 	vid_state.depth_enabled=TRUE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+4]
	or	dl, -128				; ffffff80H
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+4], edx

; 269  : }

	mov	esp, ebp
	pop	ebp
	ret	0
?depth_init@VidD3D@@IAEXXZ ENDP				; VidD3D::depth_init
_TEXT	ENDS
PUBLIC	?init_tex_stages@VidD3D@@IAEXXZ			; VidD3D::init_tex_stages
_TEXT	SEGMENT
_this$ = -4
?init_tex_stages@VidD3D@@IAEXXZ PROC NEAR		; VidD3D::init_tex_stages

; 272  : {

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx

; 273  : 	d3d_state.color_op0=D3DTOP_SELECTARG1;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+56]
	and	ch, -32					; ffffffe0H
	or	ch, 2
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+56], ecx

; 274  : 	d3d_state.color1_arg0=D3DTA_DIFFUSE;

	mov	eax, DWORD PTR _this$[ebp]
	mov	BYTE PTR [eax+64], 0

; 275  : 	d3d_state.color2_arg0=D3DTA_DIFFUSE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	BYTE PTR [ecx+65], 0

; 276  : 	vid_state.flat_shade=FALSE;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+4]
	and	eax, -8388609				; ff7fffffH
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+4], eax

; 277  : 	vid_state.color_mode=VCM_GOURAUD;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+4]
	and	eax, -114689				; fffe3fffH
	or	ah, 64					; 00000040H
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+4], eax

; 278  : 
; 279  : 	d3d_state.alpha_op0=D3DTOP_SELECTARG1;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+56]
	and	eax, -260046849				; f07fffffH
	or	eax, 16777216				; 01000000H
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+56], eax

; 280  : 	d3d_state.alpha1_arg0=D3DTA_DIFFUSE;

	mov	edx, DWORD PTR _this$[ebp]
	mov	BYTE PTR [edx+66], 0

; 281  : 	d3d_state.alpha2_arg0=D3DTA_DIFFUSE;

	mov	eax, DWORD PTR _this$[ebp]
	mov	BYTE PTR [eax+67], 0

; 282  : 	vid_state.flat_alpha=FALSE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+4]
	and	edx, -16777217				; feffffffH
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+4], edx

; 283  : 	vid_state.alpha_mode=VAM_GOURAUD;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+4]
	and	edx, -917505				; fff1ffffH
	or	edx, 131072				; 00020000H
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+4], edx

; 284  : 
; 285  : 	d3d_state.color_op1=D3DTOP_DISABLE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+56]
	and	edx, -253953				; fffc1fffH
	or	dh, 32					; 00000020H
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+56], edx

; 286  : 	d3d_state.color1_arg1=D3DTA_DIFFUSE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	BYTE PTR [ecx+68], 0

; 287  : 	d3d_state.color2_arg1=D3DTA_DIFFUSE;

	mov	edx, DWORD PTR _this$[ebp]
	mov	BYTE PTR [edx+69], 0

; 288  : 
; 289  : 	d3d_state.alpha_op1=D3DTOP_DISABLE;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+60]
	and	ecx, -32				; ffffffe0H
	or	ecx, 1
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+60], ecx

; 290  : 	d3d_state.alpha1_arg1=D3DTA_DIFFUSE;

	mov	eax, DWORD PTR _this$[ebp]
	mov	BYTE PTR [eax+70], 0

; 291  : 	d3d_state.alpha2_arg1=D3DTA_DIFFUSE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	BYTE PTR [ecx+71], 0

; 292  : 
; 293  : 	d3d_state.color_op2=D3DTOP_DISABLE;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+56]
	and	eax, -8126465				; ff83ffffH
	or	eax, 262144				; 00040000H
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+56], eax

; 294  : 	d3d_state.color1_arg2=D3DTA_DIFFUSE;

	mov	edx, DWORD PTR _this$[ebp]
	mov	BYTE PTR [edx+72], 0

; 295  : 	d3d_state.color2_arg2=D3DTA_DIFFUSE;

	mov	eax, DWORD PTR _this$[ebp]
	mov	BYTE PTR [eax+73], 0

; 296  : 
; 297  : 	d3d_state.alpha_op2=D3DTOP_DISABLE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+60]
	and	edx, -993				; fffffc1fH
	or	edx, 32					; 00000020H
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+60], edx

; 298  : 	d3d_state.alpha1_arg2=D3DTA_DIFFUSE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	BYTE PTR [ecx+74], 0

; 299  : 	d3d_state.alpha2_arg2=D3DTA_DIFFUSE;

	mov	edx, DWORD PTR _this$[ebp]
	mov	BYTE PTR [edx+75], 0

; 300  : 
; 301  : 	dev->SetTextureStageState(0,D3DTSS_COLOROP,d3d_state.color_op0);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+56]
	shr	ecx, 8
	and	ecx, 31					; 0000001fH
	push	ecx
	push	1
	push	0
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+252]

; 302  : 	dev->SetTextureStageState(0,D3DTSS_COLORARG1,d3d_state.color1_arg0);

	mov	edx, DWORD PTR _this$[ebp]
	xor	eax, eax
	mov	al, BYTE PTR [edx+64]
	push	eax
	push	2
	push	0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+252]

; 303  : 	dev->SetTextureStageState(0,D3DTSS_COLORARG2,d3d_state.color2_arg0);

	mov	ecx, DWORD PTR _this$[ebp]
	xor	edx, edx
	mov	dl, BYTE PTR [ecx+65]
	push	edx
	push	3
	push	0
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+252]

; 304  : 	dev->SetTextureStageState(0,D3DTSS_ALPHAOP,d3d_state.alpha_op0);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+56]
	shr	ecx, 23					; 00000017H
	and	ecx, 31					; 0000001fH
	push	ecx
	push	4
	push	0
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+252]

; 305  : 	dev->SetTextureStageState(0,D3DTSS_ALPHAARG1,d3d_state.alpha1_arg0);

	mov	edx, DWORD PTR _this$[ebp]
	xor	eax, eax
	mov	al, BYTE PTR [edx+66]
	push	eax
	push	5
	push	0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+252]

; 306  : 	dev->SetTextureStageState(0,D3DTSS_ALPHAARG2,d3d_state.alpha2_arg0);

	mov	ecx, DWORD PTR _this$[ebp]
	xor	edx, edx
	mov	dl, BYTE PTR [ecx+67]
	push	edx
	push	6
	push	0
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+252]

; 307  : 
; 308  : 	dev->SetTextureStageState(1,D3DTSS_COLOROP,d3d_state.color_op1);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+56]
	shr	ecx, 13					; 0000000dH
	and	ecx, 31					; 0000001fH
	push	ecx
	push	1
	push	1
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+252]

; 309  : 	dev->SetTextureStageState(1,D3DTSS_COLORARG1,d3d_state.color1_arg1);

	mov	edx, DWORD PTR _this$[ebp]
	xor	eax, eax
	mov	al, BYTE PTR [edx+68]
	push	eax
	push	2
	push	1
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+252]

; 310  : 	dev->SetTextureStageState(1,D3DTSS_COLORARG2,d3d_state.color2_arg1);

	mov	ecx, DWORD PTR _this$[ebp]
	xor	edx, edx
	mov	dl, BYTE PTR [ecx+69]
	push	edx
	push	3
	push	1
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+252]

; 311  : 	dev->SetTextureStageState(1,D3DTSS_ALPHAOP,d3d_state.alpha_op1);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+60]
	and	ecx, 31					; 0000001fH
	push	ecx
	push	4
	push	1
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+252]

; 312  : 	dev->SetTextureStageState(1,D3DTSS_ALPHAARG1,d3d_state.alpha1_arg1);

	mov	edx, DWORD PTR _this$[ebp]
	xor	eax, eax
	mov	al, BYTE PTR [edx+70]
	push	eax
	push	5
	push	1
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+252]

; 313  : 	dev->SetTextureStageState(1,D3DTSS_ALPHAARG2,d3d_state.alpha2_arg1);

	mov	ecx, DWORD PTR _this$[ebp]
	xor	edx, edx
	mov	dl, BYTE PTR [ecx+71]
	push	edx
	push	6
	push	1
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+252]

; 314  : 
; 315  : 	dev->SetTextureStageState(2,D3DTSS_COLOROP,d3d_state.color_op2);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+56]
	shr	ecx, 18					; 00000012H
	and	ecx, 31					; 0000001fH
	push	ecx
	push	1
	push	2
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+252]

; 316  : 	dev->SetTextureStageState(2,D3DTSS_COLORARG1,d3d_state.color1_arg2);

	mov	edx, DWORD PTR _this$[ebp]
	xor	eax, eax
	mov	al, BYTE PTR [edx+72]
	push	eax
	push	2
	push	2
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+252]

; 317  : 	dev->SetTextureStageState(2,D3DTSS_COLORARG2,d3d_state.color2_arg2);

	mov	ecx, DWORD PTR _this$[ebp]
	xor	edx, edx
	mov	dl, BYTE PTR [ecx+73]
	push	edx
	push	3
	push	2
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+252]

; 318  : 	dev->SetTextureStageState(2,D3DTSS_ALPHAOP,d3d_state.alpha_op2);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+60]
	shr	ecx, 5
	and	ecx, 31					; 0000001fH
	push	ecx
	push	4
	push	2
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+252]

; 319  : 	dev->SetTextureStageState(2,D3DTSS_ALPHAARG1,d3d_state.alpha1_arg2);

	mov	edx, DWORD PTR _this$[ebp]
	xor	eax, eax
	mov	al, BYTE PTR [edx+74]
	push	eax
	push	5
	push	2
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+252]

; 320  : 	dev->SetTextureStageState(2,D3DTSS_ALPHAARG2,d3d_state.alpha2_arg2);

	mov	ecx, DWORD PTR _this$[ebp]
	xor	edx, edx
	mov	dl, BYTE PTR [ecx+75]
	push	edx
	push	6
	push	2
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+252]

; 321  : }

	mov	esp, ebp
	pop	ebp
	ret	0
?init_tex_stages@VidD3D@@IAEXXZ ENDP			; VidD3D::init_tex_stages
_TEXT	ENDS
EXTRN	__fltused:NEAR
_DATA	SEGMENT
	ORG $+3
$SG65326 DB	'D:\Games\duke_nukem_forever\Hacked\MeshEd\vidd3d\dev.cpp'
	DB	00H
_DATA	ENDS
_TEXT	SEGMENT
_this$ = -68
_matrix$ = -64
?set_default@VidD3D@@UAEXXZ PROC NEAR			; VidD3D::set_default

; 324  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 68					; 00000044H
	mov	DWORD PTR _this$[ebp], ecx
$L65321:

; 325  : 	D_ASSERT(dev);

	mov	eax, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [eax+40], 0
	jne	SHORT $L65324
	push	325					; 00000145H
	push	OFFSET FLAT:$SG65326
	call	?_d_assert@@YAXPBDK@Z			; _d_assert
	add	esp, 8
$L65324:
	xor	ecx, ecx
	test	ecx, ecx
	jne	SHORT $L65321

; 326  : 	
; 327  : 	dev->ShowCursor(FALSE);

	push	0
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+48]

; 328  : 
; 329  : 	vid_state.in_scene=FALSE;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+4]
	and	al, -5					; fffffffbH
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+4], eax

; 330  : 
; 331  : 	/* set active texture to null */
; 332  : 	active_tex=null;

	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+300], 0

; 333  : 
; 334  : 	/* initialze depth buffering */
; 335  : 	depth_init();

	mov	ecx, DWORD PTR _this$[ebp]
	call	?depth_init@VidD3D@@IAEXXZ		; VidD3D::depth_init

; 336  : 	//vid_state.zfunc=ZCMP_GREATER;
; 337  : 	vid_state.zfunc=ZCMP_LESS;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ch, -16					; fffffff0H
	or	ch, 2
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx

; 338  : 	dev->SetRenderState(D3DRS_ZFUNC,vid_state.zfunc);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	shr	ecx, 8
	and	ecx, 15					; 0000000fH
	push	ecx
	push	23					; 00000017H
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+200]

; 339  : 	/* enable writing to depth buffer */
; 340  : 	vid_state.depth_write=TRUE;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+4]
	or	ah, 16					; 00000010H
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+4], eax

; 341  : 	dev->SetRenderState(D3DRS_ZWRITEENABLE,vid_state.depth_write);

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+4]
	shr	eax, 12					; 0000000cH
	and	eax, 1
	push	eax
	push	14					; 0000000eH
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+200]

; 342  : 
; 343  : 	/* enable writing to color buffer */
; 344  : 	vid_state.color_write=TRUE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+4]
	or	dh, 32					; 00000020H
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+4], edx

; 345  : 	dev->SetRenderState(D3DRS_COLORWRITEENABLE,D3DCOLORWRITEENABLE_RED|D3DCOLORWRITEENABLE_GREEN|D3DCOLORWRITEENABLE_BLUE);

	push	7
	push	168					; 000000a8H
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+200]

; 346  : 
; 347  : 	/* turn on dithering */
; 348  : 	dev->SetRenderState(D3DRS_DITHERENABLE,TRUE);

	push	1
	push	26					; 0000001aH
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+200]

; 349  : 
; 350  : 	dev->SetRenderState(D3DRS_FILLMODE,D3DFILL_SOLID);

	push	3
	push	8
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+200]

; 351  : 
; 352  : 	/* setup clip window */
; 353  : 	ClipWindow(0,0,res.width,res.height);

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+28]
	push	edx
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+24]
	push	ecx
	push	0
	push	0
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [eax+32]

; 354  : 
; 355  : 	/* init texture stages */
; 356  : 	init_tex_stages();

	mov	ecx, DWORD PTR _this$[ebp]
	call	?init_tex_stages@VidD3D@@IAEXXZ		; VidD3D::init_tex_stages

; 357  : 
; 358  : 	/* setup shade mode */
; 359  : 	dev->SetRenderState(D3DRS_SHADEMODE,D3DSHADE_GOURAUD);

	push	2
	push	9
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+200]

; 360  : 
; 361  : 	/* init alpha test */
; 362  : 	vid_state.alpha_test_enable=TRUE;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+4]
	or	edx, 33554432				; 02000000H
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+4], edx

; 363  : 	dev->SetRenderState(D3DRS_ALPHATESTENABLE,TRUE);

	push	1
	push	15					; 0000000fH
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+200]

; 364  : 	vid_state.alpha_test_mode=VCMP_ALWAYS;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+8]
	and	dh, -16					; fffffff0H
	or	dh, 8
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+8], edx

; 365  : 	dev->SetRenderState(D3DRS_ALPHAFUNC,vid_state.alpha_test_mode);

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+8]
	shr	edx, 8
	and	edx, 15					; 0000000fH
	push	edx
	push	25					; 00000019H
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+200]

; 366  : 
; 367  : 	/* init tex filter modes test */
; 368  : 	vid_state.min_filter_mode=VFM_POINT;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+8]
	and	ch, -113				; ffffff8fH
	or	ch, 16					; 00000010H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+8], ecx

; 369  : 	dev->SetTextureStageState(0,D3DTSS_MINFILTER,vid_state.min_filter_mode);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+8]
	shr	ecx, 12					; 0000000cH
	and	ecx, 7
	push	ecx
	push	17					; 00000011H
	push	0
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+252]

; 370  : 	vid_state.mag_filter_mode=VFM_BILINEAR;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+8]
	and	eax, -229377				; fffc7fffH
	or	eax, 65536				; 00010000H
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+8], eax

; 371  : 	dev->SetTextureStageState(0,D3DTSS_MAGFILTER,vid_state.mag_filter_mode);

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+8]
	shr	eax, 15					; 0000000fH
	and	eax, 7
	push	eax
	push	16					; 00000010H
	push	0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+252]

; 372  : 	dev->SetTextureStageState(0,D3DTSS_MIPFILTER,D3DTEXF_NONE);

	push	0
	push	18					; 00000012H
	push	0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+252]

; 373  : 	//dev->SetTextureStageState(0,D3DTSS_MIPFILTER,D3DTEXF_LINEAR);
; 374  : 
; 375  : 	/* init cull state */
; 376  : 	vid_state.cull_mode=VWM_SHOWALL;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+8]
	and	edx, -6291457				; ff9fffffH
	or	edx, 2097152				; 00200000H
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+8], edx

; 377  : 	dev->SetRenderState(D3DRS_CULLMODE,vid_state.cull_mode);

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+8]
	shr	edx, 21					; 00000015H
	and	edx, 3
	push	edx
	push	22					; 00000016H
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+200]

; 378  : 
; 379  : 	/* init blend modes */
; 380  : 	d3d_state.src_blend=D3DBLEND_ONE;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+56]
	and	ecx, -16				; fffffff0H
	or	ecx, 2
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+56], ecx

; 381  : 	d3d_state.dst_blend=D3DBLEND_ZERO;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+56]
	and	cl, 15					; 0000000fH
	or	ecx, 16					; 00000010H
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+56], ecx

; 382  : 	vid_state.blend_mode=VBM_OPAQUE;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	and	ecx, -7340033				; ff8fffffH
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+4], ecx

; 383  : 	dev->SetRenderState(D3DRS_ALPHABLENDENABLE,TRUE);

	push	1
	push	27					; 0000001bH
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+200]

; 384  : 	dev->SetRenderState(D3DRS_SRCBLEND,d3d_state.src_blend);

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+56]
	and	ecx, 15					; 0000000fH
	push	ecx
	push	19					; 00000013H
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+200]

; 385  : 	dev->SetRenderState(D3DRS_DESTBLEND,d3d_state.dst_blend);

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+56]
	shr	eax, 4
	and	eax, 15					; 0000000fH
	push	eax
	push	20					; 00000014H
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+200]

; 386  : 
; 387  : 	D3DMATRIX matrix;
; 388  : 
; 389  : 	matrix.m[0][0]=1.0f;matrix.m[0][1]=0.0f;matrix.m[0][2]=0.0f;matrix.m[0][3]=0.0f;

	mov	DWORD PTR _matrix$[ebp], 1065353216	; 3f800000H
	mov	DWORD PTR _matrix$[ebp+4], 0
	mov	DWORD PTR _matrix$[ebp+8], 0
	mov	DWORD PTR _matrix$[ebp+12], 0

; 390  : 	matrix.m[1][0]=0.0f;matrix.m[1][1]=1.0f;matrix.m[1][2]=0.0f;matrix.m[1][3]=0.0f;

	mov	DWORD PTR _matrix$[ebp+16], 0
	mov	DWORD PTR _matrix$[ebp+20], 1065353216	; 3f800000H
	mov	DWORD PTR _matrix$[ebp+24], 0
	mov	DWORD PTR _matrix$[ebp+28], 0

; 391  : 	matrix.m[2][0]=0.0f;matrix.m[2][1]=0.0f;matrix.m[2][2]=1.0f;matrix.m[2][3]=0.0f;

	mov	DWORD PTR _matrix$[ebp+32], 0
	mov	DWORD PTR _matrix$[ebp+36], 0
	mov	DWORD PTR _matrix$[ebp+40], 1065353216	; 3f800000H
	mov	DWORD PTR _matrix$[ebp+44], 0

; 392  : 	matrix.m[3][0]=0.0f;matrix.m[3][1]=0.0f;matrix.m[2][2]=0.0f;matrix.m[3][3]=1.0f;

	mov	DWORD PTR _matrix$[ebp+48], 0
	mov	DWORD PTR _matrix$[ebp+52], 0
	mov	DWORD PTR _matrix$[ebp+40], 0
	mov	DWORD PTR _matrix$[ebp+60], 1065353216	; 3f800000H

; 393  : 
; 394  : 	dev->SetTransform(D3DTS_VIEW,&matrix);

	lea	ecx, DWORD PTR _matrix$[ebp]
	push	ecx
	push	2
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	ecx, DWORD PTR [edx]
	push	eax
	call	DWORD PTR [ecx+148]

; 395  : 	dev->SetTransform(D3DTS_TEXTURE0,&matrix);

	lea	edx, DWORD PTR _matrix$[ebp]
	push	edx
	push	16					; 00000010H
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx+40]
	mov	edx, DWORD PTR [eax]
	push	ecx
	call	DWORD PTR [edx+148]

; 396  : 	dev->SetTransform(D3DTS_PROJECTION,&matrix);

	lea	eax, DWORD PTR _matrix$[ebp]
	push	eax
	push	3
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx+40]
	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+40]
	mov	eax, DWORD PTR [ecx]
	push	edx
	call	DWORD PTR [eax+148]

; 397  : }

	mov	esp, ebp
	pop	ebp
	ret	0
?set_default@VidD3D@@UAEXXZ ENDP			; VidD3D::set_default
_this$ = -24
_old_state$ = -20
?restore_state@VidD3D@@IAEXXZ PROC NEAR			; VidD3D::restore_state

; 400  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 24					; 00000018H
	push	esi
	push	edi
	mov	DWORD PTR _this$[ebp], ecx

; 401  : 	VidState old_state=vid_state;

	mov	esi, DWORD PTR _this$[ebp]
	add	esi, 4
	mov	ecx, 5
	lea	edi, DWORD PTR _old_state$[ebp]
	rep movsd

; 402  : 
; 403  : 	set_default();

	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+12]

; 404  : 	
; 405  : 	ColorMode((vidcolormodetype_t)old_state.color_mode);

	mov	eax, DWORD PTR _old_state$[ebp]
	shr	eax, 14					; 0000000eH
	and	eax, 7
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+72]

; 406  : 	AlphaMode((vidalphamodetype_t)old_state.alpha_mode);

	mov	eax, DWORD PTR _old_state$[ebp]
	shr	eax, 17					; 00000011H
	and	eax, 7
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+76]

; 407  : 	BlendMode((vidblendmodetype_t)old_state.blend_mode);

	mov	eax, DWORD PTR _old_state$[ebp]
	shr	eax, 20					; 00000014H
	and	eax, 7
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+80]

; 408  : 	WindingMode((vidwindingmodetype_t)old_state.cull_mode);

	mov	eax, DWORD PTR _old_state$[ebp+4]
	shr	eax, 21					; 00000015H
	and	eax, 3
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+84]

; 409  : 	MinFilterMode((vidfiltermodetype_t)old_state.min_filter_mode);

	mov	eax, DWORD PTR _old_state$[ebp+4]
	shr	eax, 12					; 0000000cH
	and	eax, 7
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+88]

; 410  : 	MagFilterMode((vidfiltermodetype_t)old_state.mag_filter_mode);

	mov	eax, DWORD PTR _old_state$[ebp+4]
	shr	eax, 15					; 0000000fH
	and	eax, 7
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+92]

; 411  : 	AlphaTestMode((vidatestmodetype_t)old_state.alpha_test_mode);

	mov	eax, DWORD PTR _old_state$[ebp+4]
	shr	eax, 8
	and	eax, 15					; 0000000fH
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+96]

; 412  : 	AlphaTestEnable(old_state.alpha_test_enable);

	mov	eax, DWORD PTR _old_state$[ebp]
	shr	eax, 25					; 00000019H
	and	eax, 1
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+104]

; 413  : 	DepthFunc((zfunc_modetype_t)old_state.zfunc);

	mov	eax, DWORD PTR _old_state$[ebp]
	shr	eax, 8
	and	eax, 15					; 0000000fH
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+100]

; 414  : 	FlatColor(old_state.color_r,old_state.color_g,old_state.color_b);

	mov	eax, DWORD PTR _old_state$[ebp+8]
	shr	eax, 16					; 00000010H
	and	eax, 255				; 000000ffH
	push	eax
	mov	ecx, DWORD PTR _old_state$[ebp+8]
	shr	ecx, 8
	and	ecx, 255				; 000000ffH
	push	ecx
	mov	edx, DWORD PTR _old_state$[ebp+8]
	and	edx, 255				; 000000ffH
	push	edx
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+56]

; 415  : 	FlatAlpha(old_state.color_a);

	mov	eax, DWORD PTR _old_state$[ebp+4]
	shr	eax, 24					; 00000018H
	and	eax, 255				; 000000ffH
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+64]

; 416  : 	AlphaTestValue(old_state.alpha_test_val);

	mov	eax, DWORD PTR _old_state$[ebp+4]
	and	eax, 255				; 000000ffH
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+68]

; 417  : 	ClipWindow(old_state.clip_x,old_state.clip_y,old_state.clip_x + old_state.clip_width,old_state.clip_y + old_state.clip_height);

	mov	eax, DWORD PTR _old_state$[ebp+14]
	and	eax, 65535				; 0000ffffH
	mov	ecx, DWORD PTR _old_state$[ebp+18]
	and	ecx, 65535				; 0000ffffH
	add	eax, ecx
	push	eax
	mov	edx, DWORD PTR _old_state$[ebp+12]
	and	edx, 65535				; 0000ffffH
	mov	eax, DWORD PTR _old_state$[ebp+16]
	and	eax, 65535				; 0000ffffH
	add	edx, eax
	push	edx
	mov	ecx, DWORD PTR _old_state$[ebp+14]
	and	ecx, 65535				; 0000ffffH
	push	ecx
	mov	edx, DWORD PTR _old_state$[ebp+12]
	and	edx, 65535				; 0000ffffH
	push	edx
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+32]

; 418  : 	ColorWrite(old_state.color_write);

	mov	eax, DWORD PTR _old_state$[ebp]
	shr	eax, 13					; 0000000dH
	and	eax, 1
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+44]

; 419  : 	DepthWrite(old_state.depth_write);

	mov	eax, DWORD PTR _old_state$[ebp]
	shr	eax, 12					; 0000000cH
	and	eax, 1
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+48]

; 420  : 
; 421  : 	BeginScene();

	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+204]

; 422  : 	ClearScreen();

	push	0
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+28]

; 423  : 	EndScene();

	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+208]

; 424  : 	Swap();

	push	1
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+24]

; 425  : 
; 426  : 	if (old_state.in_scene)

	mov	eax, DWORD PTR _old_state$[ebp]
	shr	eax, 2
	and	eax, 1
	test	eax, eax
	je	SHORT $L65341

; 427  : 		BeginScene();

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+204]
$L65341:

; 428  : }

	pop	edi
	pop	esi
	mov	esp, ebp
	pop	ebp
	ret	0
?restore_state@VidD3D@@IAEXXZ ENDP			; VidD3D::restore_state
_TEXT	ENDS
PUBLIC	?flush_vbuffers@VidD3D@@IAEXXZ			; VidD3D::flush_vbuffers
_TEXT	SEGMENT
_this$ = -4
?flush_vbuffers@VidD3D@@IAEXXZ PROC NEAR		; VidD3D::flush_vbuffers

; 431  : {

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx

; 432  : 
; 433  : }

	mov	esp, ebp
	pop	ebp
	ret	0
?flush_vbuffers@VidD3D@@IAEXXZ ENDP			; VidD3D::flush_vbuffers
_TEXT	ENDS
EXTRN	__rotl:NEAR
_DATA	SEGMENT
	ORG $+3
$SG65352 DB	'meshes\flamethrower\flamethrower1BC.BMP', 00H
$SG65354 DB	'meshes\flamethrower\flamethrower2BC.BMP', 00H
$SG65356 DB	'meshes\flamethrower\flamethrower3BC.tga', 00H
_DATA	ENDS
_TEXT	SEGMENT
_this$ = -92
_colors$ = -16
_tex1$ = -4
_tex2$ = -8
_tex3$ = -12
_v$65360 = -52
_tv$65361 = -88
?Diags@VidD3D@@UAEXXZ PROC NEAR				; VidD3D::Diags

; 436  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 92					; 0000005cH
	mov	DWORD PTR _this$[ebp], ecx

; 437  : 	U32 colors=0xFF;

	mov	DWORD PTR _colors$[ebp], 255		; 000000ffH

; 438  : 	
; 439  : 	//VidTex *tex=TexLoad("..\\ximage\\images\\test.tga",TRUE);
; 440  : 	//VidTex *tex=TexLoad("resource\\but_aforward.bmp",TRUE);
; 441  : 	VidTex *tex1=TexLoad("meshes\\flamethrower\\flamethrower1BC.BMP",TRUE,TEX_LOAD_MASKED,0x00FF00FF);

	push	16711935				; 00ff00ffH
	push	1
	push	1
	push	OFFSET FLAT:$SG65352
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+168]
	mov	DWORD PTR _tex1$[ebp], eax

; 442  : 	VidTex *tex2=TexLoad("meshes\\flamethrower\\flamethrower2BC.BMP",TRUE,TEX_LOAD_MASKED,0x00FF00FF);

	push	16711935				; 00ff00ffH
	push	1
	push	1
	push	OFFSET FLAT:$SG65354
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+168]
	mov	DWORD PTR _tex2$[ebp], eax

; 443  : 	VidTex *tex3=TexLoad("meshes\\flamethrower\\flamethrower3BC.tga",TRUE,TEX_LOAD_MASKED,0x00FF00FF);

	push	16711935				; 00ff00ffH
	push	1
	push	1
	push	OFFSET FLAT:$SG65356
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+168]
	mov	DWORD PTR _tex3$[ebp], eax

; 444  : 
; 445  : 	TexActivate(tex1,VTA_NORMAL);

	push	0
	mov	eax, DWORD PTR _tex1$[ebp]
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+164]

; 446  : 	TexActivate(tex2,VTA_NORMAL);

	push	0
	mov	eax, DWORD PTR _tex2$[ebp]
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+164]

; 447  : 	TexActivate(tex3,VTA_NORMAL);

	push	0
	mov	eax, DWORD PTR _tex3$[ebp]
	push	eax
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+164]

; 448  : 	DepthEnable(FALSE);

	push	0
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+40]

; 449  : 	SetHooptiFrustum(0.0f,1.0f,0.5f,1024.0f);

	push	1149239296				; 44800000H
	push	1056964608				; 3f000000H
	push	1065353216				; 3f800000H
	push	0
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+224]
$L65358:

; 450  : 	while(1)

	mov	eax, 1
	test	eax, eax
	je	$L65359

; 452  : 		ClearScreen(colors);

	mov	ecx, DWORD PTR _colors$[ebp]
	push	ecx
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [eax+28]

; 453  : 		BeginScene();

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+204]

; 454  : 
; 455  : 		//AlphaMode(VAM_TEXTURE);
; 456  : 		AlphaMode(VAM_TEXTURE);

	push	2
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+76]

; 457  : 		ColorMode(VCM_TEXTURE);

	push	2
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+72]

; 458  : 		BlendMode(VBM_OPAQUE);

	push	0
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+80]

; 459  : 		AlphaTestMode(VCMP_GREATER);

	push	5
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+96]

; 460  : 		AlphaTestValue(0);

	push	0
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+68]

; 461  : 		MagFilterMode(VFM_POINT);

	push	1
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+92]

; 462  : 		MinFilterMode(VFM_POINT);

	push	1
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+88]

; 463  : 
; 464  : 		vector_str v[3];
; 465  : 		vector_str tv[3];
; 466  : 		
; 467  : 		v[0].x=25.0f;

	mov	DWORD PTR _v$65360[ebp], 1103626240	; 41c80000H

; 468  : 		v[0].y=25.0f;

	mov	DWORD PTR _v$65360[ebp+4], 1103626240	; 41c80000H

; 469  : 		v[0].z=0.5f;

	mov	DWORD PTR _v$65360[ebp+8], 1056964608	; 3f000000H

; 470  : 		v[1].x=400.0f;

	mov	DWORD PTR _v$65360[ebp+12], 1137180672	; 43c80000H

; 471  : 		v[1].y=575.0f;

	mov	DWORD PTR _v$65360[ebp+16], 1141882880	; 440fc000H

; 472  : 		v[1].z=0.5f;

	mov	DWORD PTR _v$65360[ebp+20], 1056964608	; 3f000000H

; 473  : 		v[2].x=775.0f;

	mov	DWORD PTR _v$65360[ebp+24], 1145159680	; 4441c000H

; 474  : 		v[2].y=25.0f;

	mov	DWORD PTR _v$65360[ebp+28], 1103626240	; 41c80000H

; 475  : 		v[2].z=0.5f;

	mov	DWORD PTR _v$65360[ebp+32], 1056964608	; 3f000000H

; 476  : 
; 477  : 		tv[0].x=0.0f;

	mov	DWORD PTR _tv$65361[ebp], 0

; 478  : 		tv[0].y=0.0f;

	mov	DWORD PTR _tv$65361[ebp+4], 0

; 479  : 		tv[1].x=127.0f;

	mov	DWORD PTR _tv$65361[ebp+12], 1123942400	; 42fe0000H

; 480  : 		tv[1].y=255.0f;

	mov	DWORD PTR _tv$65361[ebp+16], 1132396544	; 437f0000H

; 481  : 		tv[2].x=255.0f;

	mov	DWORD PTR _tv$65361[ebp+24], 1132396544	; 437f0000H

; 482  : 		tv[2].y=0.0f;

	mov	DWORD PTR _tv$65361[ebp+28], 0

; 483  : 
; 484  : 		//DrawTriangle(&v[0],null,null,&tv[0]);
; 485  : 		//DrawPolygon(3,&v[0],null,null,&tv[0]);
; 486  : 		DrawPolygonFlags(0,3,&v[0],null,null,&tv[0]);

	lea	eax, DWORD PTR _tv$65361[ebp]
	push	eax
	push	0
	push	0
	lea	ecx, DWORD PTR _v$65360[ebp]
	push	ecx
	push	3
	push	0
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [eax+140]

; 487  : 
; 488  : 		EndScene();

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+208]

; 489  : 		Swap();

	push	1
	mov	eax, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [eax]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [edx+24]

; 490  : 
; 491  : 		colors=_rotl(colors,8);

	push	8
	mov	eax, DWORD PTR _colors$[ebp]
	push	eax
	call	__rotl
	add	esp, 8
	mov	DWORD PTR _colors$[ebp], eax

; 492  : 	}

	jmp	$L65358
$L65359:

; 493  : 	TexRelease(tex1);

	mov	ecx, DWORD PTR _tex1$[ebp]
	push	ecx
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [eax+180]

; 494  : 	TexRelease(tex2);

	mov	ecx, DWORD PTR _tex2$[ebp]
	push	ecx
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [eax+180]

; 495  : 	TexRelease(tex3);

	mov	ecx, DWORD PTR _tex3$[ebp]
	push	ecx
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx]
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR [eax+180]

; 496  : }

	mov	esp, ebp
	pop	ebp
	ret	0
?Diags@VidD3D@@UAEXXZ ENDP				; VidD3D::Diags
_TEXT	ENDS
PUBLIC	??_GVBuffer@@QAEPAXI@Z				; VBuffer::`scalar deleting destructor'
;	COMDAT ??1?$XRingChain@VVBuffer@@@@QAE@XZ
_TEXT	SEGMENT
_this$ = -16
_next$65545 = -4
$T65906 = -8
$T65907 = -12
??1?$XRingChain@VVBuffer@@@@QAE@XZ PROC NEAR		; XRingChain<VBuffer>::~XRingChain<VBuffer>, COMDAT

; 999  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 20					; 00000014H
	mov	DWORD PTR _this$[ebp], ecx

; 1000 : 	if (!cur)

	mov	eax, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [eax], 0
	jne	SHORT $L65541

; 1001 : 		return;

	jmp	SHORT $L65540
$L65541:

; 1002 : 	
; 1003 : 	/* terminate loop */
; 1004 : 	cur->prev->next=null;

	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR [edx+4]
	mov	DWORD PTR [eax], 0
$L65543:

; 1005 : 	/* free loop */
; 1006 : 	while(cur)

	mov	ecx, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [ecx], 0
	je	SHORT $L65544

; 1008 : 		TYPE *next=(TYPE *)cur->next;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx]
	mov	ecx, DWORD PTR [eax]
	mov	DWORD PTR _next$65545[ebp], ecx

; 1009 : 		delete cur;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx]
	mov	DWORD PTR $T65907[ebp], eax
	mov	ecx, DWORD PTR $T65907[ebp]
	mov	DWORD PTR $T65906[ebp], ecx
	cmp	DWORD PTR $T65906[ebp], 0
	je	SHORT $L65908
	push	1
	mov	ecx, DWORD PTR $T65906[ebp]
	call	??_GVBuffer@@QAEPAXI@Z			; VBuffer::`scalar deleting destructor'
	mov	DWORD PTR -20+[ebp], eax
	jmp	SHORT $L65909
$L65908:
	mov	DWORD PTR -20+[ebp], 0
$L65909:

; 1010 : 		cur=next;

	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR _next$65545[ebp]
	mov	DWORD PTR [edx], eax

; 1011 : 	}

	jmp	SHORT $L65543
$L65544:
$L65540:

; 1012 : }

	mov	esp, ebp
	pop	ebp
	ret	0
??1?$XRingChain@VVBuffer@@@@QAE@XZ ENDP			; XRingChain<VBuffer>::~XRingChain<VBuffer>
_TEXT	ENDS
PUBLIC	??0XListState@@QAE@KK@Z				; XListState::XListState
;	COMDAT ??0?$XList@VVidTexD3D@@@@QAE@KK@Z
_TEXT	SEGMENT
_block_size$ = 8
_owned$ = 12
_this$ = -4
??0?$XList@VVidTexD3D@@@@QAE@KK@Z PROC NEAR		; XList<VidTexD3D>::XList<VidTexD3D>, COMDAT

; 408  : {

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax], 0
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx+4], 0
	mov	edx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [edx+8], 0
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+12], 0
	mov	ecx, DWORD PTR _owned$[ebp]
	push	ecx
	mov	edx, DWORD PTR _block_size$[ebp]
	push	edx
	mov	ecx, DWORD PTR _this$[ebp]
	add	ecx, 16					; 00000010H
	call	??0XListState@@QAE@KK@Z			; XListState::XListState
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax+20], 0

; 409  : }

	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	8
??0?$XList@VVidTexD3D@@@@QAE@KK@Z ENDP			; XList<VidTexD3D>::XList<VidTexD3D>
_TEXT	ENDS
;	COMDAT ??0XListState@@QAE@KK@Z
_TEXT	SEGMENT
_BlockSize$ = 8
_Owned$ = 12
_this$ = -4
??0XListState@@QAE@KK@Z PROC NEAR			; XListState::XListState, COMDAT

; 329  : 	XListState(U32 BlockSize,U32 Owned) : block_size(BlockSize),owned(Owned){}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _BlockSize$[ebp]
	and	eax, 16777215				; 00ffffffH
	mov	ecx, DWORD PTR _this$[ebp]
	mov	edx, DWORD PTR [ecx]
	and	edx, -16777216				; ff000000H
	or	edx, eax
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax], edx
	mov	ecx, DWORD PTR _Owned$[ebp]
	and	ecx, 1
	shl	ecx, 24					; 00000018H
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [edx]
	and	eax, -16777217				; feffffffH
	or	eax, ecx
	mov	ecx, DWORD PTR _this$[ebp]
	mov	DWORD PTR [ecx], eax
	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	8
??0XListState@@QAE@KK@Z ENDP				; XListState::XListState
_TEXT	ENDS
PUBLIC	?free_nodes@?$XList@VVidTexD3D@@@@IAEXXZ	; XList<VidTexD3D>::free_nodes
;	COMDAT ??1?$XList@VVidTexD3D@@@@QAE@XZ
_TEXT	SEGMENT
_this$ = -12
$T65916 = -4
$T65917 = -8
??1?$XList@VVidTexD3D@@@@QAE@XZ PROC NEAR		; XList<VidTexD3D>::~XList<VidTexD3D>, COMDAT

; 413  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 16					; 00000010H
	mov	DWORD PTR _this$[ebp], ecx

; 414  : 	if (xlist_state.owned)

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax+16]
	shr	ecx, 24					; 00000018H
	and	ecx, 1
	test	ecx, ecx
	je	SHORT $L65561
$L65560:

; 416  : 		while(head)

	mov	edx, DWORD PTR _this$[ebp]
	cmp	DWORD PTR [edx], 0
	je	SHORT $L65561

; 418  : 			delete head->data;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	mov	edx, DWORD PTR [ecx+8]
	mov	DWORD PTR $T65917[ebp], edx
	mov	eax, DWORD PTR $T65917[ebp]
	mov	DWORD PTR $T65916[ebp], eax
	cmp	DWORD PTR $T65916[ebp], 0
	je	SHORT $L65918
	push	1
	mov	ecx, DWORD PTR $T65916[ebp]
	mov	edx, DWORD PTR [ecx]
	mov	ecx, DWORD PTR $T65916[ebp]
	call	DWORD PTR [edx]
	mov	DWORD PTR -16+[ebp], eax
	jmp	SHORT $L65919
$L65918:
	mov	DWORD PTR -16+[ebp], 0
$L65919:

; 419  : 			head=head->next;

	mov	eax, DWORD PTR _this$[ebp]
	mov	ecx, DWORD PTR [eax]
	mov	edx, DWORD PTR _this$[ebp]
	mov	eax, DWORD PTR [ecx]
	mov	DWORD PTR [edx], eax

; 420  : 		}

	jmp	SHORT $L65560
$L65561:

; 422  : 	free_nodes();

	mov	ecx, DWORD PTR _this$[ebp]
	call	?free_nodes@?$XList@VVidTexD3D@@@@IAEXXZ ; XList<VidTexD3D>::free_nodes

; 423  : }

	mov	esp, ebp
	pop	ebp
	ret	0
??1?$XList@VVidTexD3D@@@@QAE@XZ ENDP			; XList<VidTexD3D>::~XList<VidTexD3D>
_TEXT	ENDS
EXTRN	??1VBuffer@@QAE@XZ:NEAR				; VBuffer::~VBuffer
;	COMDAT ??_GVBuffer@@QAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8
_this$ = -4
??_GVBuffer@@QAEPAXI@Z PROC NEAR			; VBuffer::`scalar deleting destructor', COMDAT
	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	??1VBuffer@@QAE@XZ			; VBuffer::~VBuffer
	mov	eax, DWORD PTR ___flags$[ebp]
	and	eax, 1
	test	eax, eax
	je	SHORT $L65575
	mov	ecx, DWORD PTR _this$[ebp]
	push	ecx
	call	??3@YAXPAX@Z				; operator delete
	add	esp, 4
$L65575:
	mov	eax, DWORD PTR _this$[ebp]
	mov	esp, ebp
	pop	ebp
	ret	4
??_GVBuffer@@QAEPAXI@Z ENDP				; VBuffer::`scalar deleting destructor'
_TEXT	ENDS
EXTRN	__imp_@xlist_free_nodes@4:NEAR
;	COMDAT ?free_nodes@?$XList@VVidTexD3D@@@@IAEXXZ
_TEXT	SEGMENT
_this$ = -4
?free_nodes@?$XList@VVidTexD3D@@@@IAEXXZ PROC NEAR	; XList<VidTexD3D>::free_nodes, COMDAT

; 353  : 	inline void free_nodes(void){xlist_free_nodes(&this->head);}

	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	DWORD PTR __imp_@xlist_free_nodes@4
	mov	esp, ebp
	pop	ebp
	ret	0
?free_nodes@?$XList@VVidTexD3D@@@@IAEXXZ ENDP		; XList<VidTexD3D>::free_nodes
_TEXT	ENDS
END
